function extend(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superclass=b.prototype,b.prototype.constructor==Object.prototype.constructor&&(b.prototype.constructor=b)}var RS=function(){var a=this;this.initialize=function(){return $(document).ready(function(b){RS.Controls&&(RS.Controls.ControlsGenerator.generateControlsInContainer(),RS.Controls.ControlsGenerator.listenForControls()),a.ready()}),a},this.ready=function(){}};RS=(new RS).initialize(),RS.Core=RS.Core||{},RS.Core.copy=function(a,b){return b?jQuery.extend(!0,{},a):jQuery.extend({},a)};var override=function(a,b){if(!a)return null;if(!b)return a;var c=a;return a=function(){return c.apply(this,arguments),b.apply(this,arguments)}};RS.PubSub=function(){var a=[];this.addEvent=function(c){c&&!b(c)&&a.push({Name:c,Listeners:[]})},this.removeEvent=function(b){if(b)for(var c=0;c<a.length;c++){var d=a[c];if(d.Name==b)return void a.splice(c,1)}},this.addListener=function(a,c){if(c){var d=b(a);if(d){for(var e=0;e<d.Listeners.length;e++){var f=d.Listeners[e];if(f==c)return}d.Listeners.push(c)}}},this.removeListener=function(a,c){if(c){var d=b(a);if(d)for(var e=0;e<d.Listeners.length;e++){var f=d.Listeners[e];if(f==c)return void d.Listeners.splice(e,1)}}},this.triggerEvent=function(a,c){var d=b(a);if(d)for(var e=0;e<d.Listeners.length;e++){var f=d.Listeners[e];f&&f(c)}};var b=function(b){if(!b)return null;var c=$.grep(a,function(a,c){return a.Name==b});return c.length?c[0]:null}},RS.Constants={Errors:{DefaultMessage:"An error occured on the server. Don't worry, it's not your fault."},Logs:{Colors:{Success:"aquamarine",Error:"tomato",Warning:"#ffcc00",Info:"#f9f9f9"}},Alerts:{Warning:{BackgroundColor:"darkorange",Color:"honeydew"}}};var RS=RS||{};RS.Keys={BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,ALT:18,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,F:70,V:86,Y:89,Z:90,Zero:48,One:49,Two:50,Three:51,Four:52,Five:53,Six:54,Seven:55,Eight:56,Nine:57,ZeroNum:96,OneNum:97,TwoNum:98,ThreeNum:99,FourNum:100,FiveNum:101,SixNum:102,SevenNum:103,EightNum:104,NineNum:105,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,C:67,CONTEXT_MENU:93},RS.Guid={empty:function(){return"00000000-0000-0000-0000-000000000000"},isEmpty:function(a){return a==this.Empty()||"undefined"==typeof a||null==a||""==a},isValid:function(a){return rGx=new RegExp("\\b(?:[A-F0-9]{8})(?:-[A-F0-9]{4}){3}-(?:[A-F0-9]{12})\\b"),null!=rGx.exec((a||"").toUpperCase())},"new":function(){1==arguments.length&&this.IsValid(arguments[0])&&($(this).data("value",arguments[0]),value=arguments[0]);for(var a,b=[],c=new RegExp("[2345]"),d=0;8>d;d++)a=(65536*(1+Math.random())|0).toString(16).substring(1),null!=c.exec(d.toString())&&(3==d&&(a="6"+a.substr(1,3)),b.push("-")),b.push(a.toUpperCase());return value=b.join(""),$(this).data("value",value),value}},Array.prototype.findFirstIndex=function(a){for(var b=0;b<this.length;b++){var c=this[b];if(a(c,b))return b}return-1},Array.prototype.findFirst=function(a){var b=this.findFirstIndex(a);return b>=0?this[b]:null},Array.prototype.findFirstKeyValue=function(a,b){return a?this.findFirst(function(c,d){return c&&c[a]==b}):null},Array.prototype.findFirstKeyIndex=function(a,b){return a?this.findFirstIndex(function(c,d){return c&&c[a]==b}):null};var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};return function(e,f,g){var h=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(e)||/\d/.test(e)||(f=e,e=void 0),e=e?new Date(e):new Date,isNaN(e))throw SyntaxError("invalid date");f=String(h.masks[f]||f||h.masks["default"]),"UTC:"==f.slice(0,4)&&(f=f.slice(4),g=!0);var i=g?"getUTC":"get",j=e[i+"Date"](),k=e[i+"Day"](),l=e[i+"Month"](),m=e[i+"FullYear"](),n=e[i+"Hours"](),o=e[i+"Minutes"](),p=e[i+"Seconds"](),q=e[i+"Milliseconds"](),r=g?0:e.getTimezoneOffset(),s={d:j,dd:d(j),ddd:h.i18n.dayNames[k],dddd:h.i18n.dayNames[k+7],m:l+1,mm:d(l+1),mmm:h.i18n.monthNames[l],mmmm:h.i18n.monthNames[l+12],yy:String(m).slice(2),yyyy:m,h:n%12||12,hh:d(n%12||12),H:n,HH:d(n),M:o,MM:d(o),s:p,ss:d(p),l:d(q,3),L:d(q>99?Math.round(q/10):q),t:12>n?"a":"p",tt:12>n?"am":"pm",T:12>n?"A":"P",TT:12>n?"AM":"PM",Z:g?"UTC":(String(e).match(b)||[""]).pop().replace(c,""),o:(r>0?"-":"+")+d(100*Math.floor(Math.abs(r)/60)+Math.abs(r)%60,4),S:["th","st","nd","rd"][j%10>3?0:(j%100-j%10!=10)*j%10]};return f.replace(a,function(a){return a in s?s[a]:a.slice(1,a.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(a,b){return dateFormat(this,a,b)},String.prototype.parseDate=function(){return this.toString().indexOf("Date")>=0?new Date(parseInt(this.replace("/Date(","").replace(")/",""),10)):new Date(this)},String.prototype.removeNonAlphaNumeric=function(a){var b=0,c="function"!=typeof this||b++?this:arguments[0],d=a?/[^a-zA-Z0-9]/g:/[^a-zA-Z0-9 ]/g;return c=c.replace(d,"")},String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"g"),b)},String.prototype.startsWith=function(a){return this.slice(0,a.length)==a},String.prototype.endsWith=function(a){return this.slice(-a.length)==a},function(a){a.fn.extend({getControl:function(){return this.data("control")},enable:function(){return this.prop("disabled",!1)},disable:function(){return this.prop("disabled",!0)},check:function(){return this.prop("checked",!0)},uncheck:function(){return this.prop("checked",!1)},attrs:function(a){var b=$(this),c=[],d=b.get(0);if(d){d=d.attributes;for(var e in d){var f=d[e];if("undefined"!=typeof f.nodeValue){if(a&&-1==f.nodeName.indexOf(a))continue;c.push({Name:f.nodeName,Value:f.nodeValue})}}}return c}})}(jQuery),RS.Cache=function(){var a=function(a,b){var c=$.jStorage.get(a,b);return c},b=function(a,b){$.jStorage.set(a,b)};return{get:function(b,c){return a(b,c)},set:function(a,c){b(a,c)}}}(),RS.Event={getEvent:function(a){return a||window.event},getTarget:function(a){return a.target||a.srcElement},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},stopEvent:function(a){return this.stopPropagation(a),this.preventDefault(a),!1},sendEvent:function(a,b,c){var d=jQuery.Event(b);null!=c&&void 0!=c&&(d.Data=c),a=a?a:$(document),a.trigger(d)}},RS.LogTypes={Info:"Info",Success:"Success",Warning:"Warning",Error:"Error"},RS.Logger=function(){var a={BackgroundColor:"#fff",TextColor:"#333",Category:{Background:"#fff",Text:"green"},IsOn:!1};this.Options=a;var b=function(b,d,e,f){a.IsOn&&d&&(f&&c(f+":",a.Category.Background,a.Category.Text),c(d),e&&c(e))},c=function(b,c,d){c=c||a.BackgroundColor,d=d||a.TextColor,"object"==typeof b?console.log(b):console.log("%c"+b,"color:"+d+";font-weight:bold; background-color: "+c+";")};this.logInfo=function(a,c,d){b(RS.LogTypes.Info,a,c,d)},this.logSucces=function(a,c,d){b(RS.LogTypes.Success,a,c,d)},this.logWarning=function(a,c,d){b(RS.LogTypes.Warning,a,c,d)},this.logError=function(a,c,d){b(RS.LogTypes.Error,a,c,d)}},RS.Logger=new RS.Logger,RS.Utils={interceptForm:function(a,b,c){a=a||$("form:first"),a.ajaxForm({beforeSubmit:function(a,c,d){return b&&!b()?!1:c.valid()?void 0:!1},success:function(a){c&&c(a)}})},clearFormValidation:function(a){a=a||$("form:first"),a.find(".validation-summary-errors ul").empty()},getQueryString:function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}},getQueryStringValues:function(a){a=new String(a);var b=new Object,c=a.substring(a.indexOf("?")+1,a.length),d=c.split("&");for(i=0;i<d.length;i++){var e=d[i].split("="),f=e[0],g=e[1];b[f]=g}return b},getBodyHeight:function(){var a,b,c;return document.height?a=document.height:document.body&&(document.body.scrollHeight&&(a=b=document.body.scrollHeight),document.body.offsetHeight&&(a=c=document.body.offsetHeight),b&&c&&(a=Math.max(b,c))),a},getViewPortHeight:function(){var a=0;return window.innerHeight?a=window.innerHeight-18:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientHeight:document.body&&document.body.clientHeight&&(a=document.body.clientHeight),a},isInsideElement:function(a,b){if(!a||!b)return!1;var c=b.offset();if(!c)return!1;var d=a.x>=c.left&&a.x<=c.left+b.outerWidth()&&a.y>=c.top&&a.y<=c.top+b.outerHeight();return d},getOptionsFromAttributes:function(a,b){if(!a||!b)return null;var c=a.attr(b);return c?JSON.parse(c):null},getBindingFromAttributes:function(a){var b=a.attr("data-bind");if(!b)return null;var c={},d=b.indexOf(",");return d>-1?(c.Expression=b.substr(0,d),c.Options=b.length>d+1?JSON.parse(b.substr(d+1)):null):c.Expression=b,c},getValue:function(a,b){if(!a||!b)return null;var c=a;do{var d=b.indexOf(".");if(d>-1){var e=b.substr(0,d);if(c=c[e],!c)break;b=b.substr(d+1)}else b&&(c=c[b])}while(d>-1);return c},getBoundNames:function(a){if(!a)return null;var b=a.match(/{{\s*[^{}]+\s*}}/g);return b&&(b=b.map(function(a){return a&&a.length>=4&&(a=a.substr(2),a=a.substr(0,a.length-2),-1==a.indexOf("{"))?a:a.match(/[\w\.]+/)[0]})),b}},RS.Remote=function(){var a=null,b=null,c=function(b){a=b},d=function(a){b=a};return{call:function(c,d,e,f,g,h,i){c=(b||"")+c,f=f||"GET";var j=d&&"POST"==f?JSON.stringify(d):d;(null==g||void 0==g)&&(g=!f||"GET"==f),$.ajax({type:f,dataType:"json",async:!0,cache:!1,url:c,data:j,contentType:i||"application/json; charset=utf-8",dataType:h||null,processData:g,success:function(a){e&&e(a)},error:function(a,b,c){var d="An error occured on the server. Don't worry, it's not your fault.",f=null;if(a&&a.responseText)try{var g=JSON.parse(a.responseText);g.Error&&(f=g.Error)}catch(h){f=a.responseText}!f&&c&&c.message&&(f=c.message);var f=f||d;e&&e({Error:f})},beforeSend:function(b,c){a&&0!==a.length||(a=RS.Cache.get("token")),a&&a.length&&b.setRequestHeader("Authentication-Token",a)}})},setToken:function(a){c(a)},setBaseUrl:function(a){d(a)}}}(),$.validator.defaults.ignore="",$.validator.addMethod("nonalphanumeric",function(a,b,c){var d=!1;if(0==a.length)d=!0;else{var e=a.removeNonAlphaNumeric();d=e.length==a.length}return d}),$.validator.unobtrusive.adapters.add("nonalphanumeric",{},function(a){a.rules.nonalphanumeric=!0,a.messages.nonalphanumeric=a.message}),$.validator.addMethod("nospaces",function(a,b,c){var d=!1;if(0==a.length)d=!0;else{d=!0;for(var e=0;e<a.length;e++)if(" "==a[e]){d=!1;break}}return d}),$.validator.unobtrusive.adapters.add("nospaces",{},function(a){a.rules.nospaces=!0,a.messages.nospaces=a.message}),RS.Validators=function(){return{validateIP:function(a){var b=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/;return a.match(b)}}}(),Handlebars.registerHelper("ifCond",function(a,b,c){return a===b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("disabled",function(a,b,c){return b&&(a=!a),a?'disabled="disabled"':null}),Handlebars.registerHelper("checked",function(a,b,c){return b&&(a=!a),a?'checked="checked"':null}),Handlebars.registerHelper("dateFormat",function(a,b,c){return("object"==typeof b||null===b)&&(b="mmm d, yyyy HH:MM"),a?a.parseDate().format(b):null}),Handlebars.registerHelper("json",function(a){return JSON.stringify(a)}),Handlebars.registerHelper("log",function(a){console.log(a)}),Handlebars.registerHelper("random",function(a,b){return Math.floor(Math.random()*(b-a+1)+a)}),RS.HandlebarsRenderer=function(){return{Render:function(a,b,c,d,e){a=a||[];var f=b({data:a});e?c.append(f):c.html(f),d&&d()},GetHtml:function(a,b){a=a||[];var c=b({data:a});return c}}}(),RS.BoundElement=function(a){var b=this;this.Element=a,this.InitialExpression=null,this.Matches=null,this.Binding=RS.Utils.getBindingFromAttributes(a);var c=!1;this.DataBindExpression=this.Binding?this.Binding.Expression:null,this.BindingOptions=null,this.DataBindExpression?(this.InitialExpression=this.DataBindExpression,this.DataBindExpression=this.DataBindExpression.replaceAll("{{","").replaceAll("}}",""),this.Matches=[this.DataBindExpression]):(this.InitialExpression=a.text(),this.Matches=this.InitialExpression?RS.Utils.getBoundNames(this.InitialExpression):null),this.VisibilityExpression=a.attr("data-bind-visible"),this.solve=function(d,e){if(d&&(!e||e.Source!=b)){if(e&&e.IsSource&&b.DataBindExpression&&d.Model&&c){var g=b.getValue(),h=d.Model[b.DataBindExpression];if(h==g)return;d.Model[b.DataBindExpression]=g,d.Model.PubSub.triggerEvent("change",{Source:b,Property:b.DataBindExpression,Value:g})}if(!e||e&&!e.IsSource){if(b.Matches&&b.Matches.length){var i=f(d,b.InitialExpression,b.Matches);b.setValue(g,i)}if(b.VisibilityExpression){var j=RS.Utils.getBoundNames(b.VisibilityExpression),k=f(d,b.VisibilityExpression,j);k=k===!0||"string"==typeof k&&"true"==k.toLowerCase(),k?a.show():a.hide()}}c=!0}},this.setValue=function(a,c){if("input"==b.Element[0].tagName.toLowerCase())if(b.Element.is(":checkbox"))c&&(c="string"==typeof c?"true"==c.toLowerCase():c),c?b.Element.check():b.Element.uncheck();else if(b.Element.is(":radio")){var d=b.getValue();c==d?b.Element.check():b.Element.uncheck()}else b.Element.val(c);else if("select"==b.Element[0].tagName.toLowerCase())b.Element.val(c);else{var e=b.Element.getControl();e?"object"==typeof e&&e.setValue(c,b.Binding&&b.Binding.Options?b.Binding.Options.Source:null):b.Element.html(c)}},this.getValue=function(){var a=null,c=b.Element.getControl();return a=c?"object"==typeof c?RS.Utils.getValue(c,b.Binding.Options.Source):null:b.Element.is(":checkbox")?b.Element.is(":checked"):b.Element.val()},this.getEventsTriggeringChange=function(){return b.Element.is(":checkbox")||b.Element.is(":radio")?"change":"input"==b.Element[0].tagName.toLowerCase()?"keyup keydown":"change"};var d=function(a,b){if(!b){var c=Parser.parse(a).variables();if(c){b={};for(var d=0;d<c.length;d++)b[c[d]]=""}}var f=e(a),g=Parser.parse(f,b).simplify(b),h=g.evaluate();return h},e=function(a){return a?a:null},f=function(a,b,c){if(!b||!c||!c.length)return b;for(var e=b,f=0;f<c.length;f++){var b=c[f],g=d(b,a.Model);e=e.replace("{{"+b+"}}",g)}return e}},RS.Controller=function(a,b){var c=this;this.Name=a,this.Model=b,this.BoundElements=null,this.PubSub=new RS.PubSub;var d=function(){c.PubSub.addEvent("change")};this.bindElement=function(a){if(a){if(c.BoundElements=c.BoundElements||[],c.BoundElements.push(a),a.DataBindExpression){var b=a.Element.getControl();b&&"object"==typeof b?b.PubSub.addListener("change",function(){a.solve(c,{IsSource:!0})}):a.Element.bind(a.getEventsTriggeringChange(),function(){a.solve(c,{IsSource:!0})})}c.Model&&a.solve(c)}},this.setModel=function(a){this.Model=a,a&&a.PubSub&&(e(),a.PubSub.addListener("change",function(a){c.PubSub.triggerEvent("change",a),e(a)}))};var e=function(a){if(c.BoundElements&&c.BoundElements.length)for(var b=0;b<c.BoundElements.length;b++){var d=c.BoundElements[b];d.solve(c,a)}};this.refresh=function(){e()},d()},RS.ControllersManager=function(){var a=this;this.Controllers={},this.initialize=function(){b(),$(document).on("DOMNodeInserted",function(a){var c=$(a.target);b(c.parent())})},this.registerModel=function(b,c){a.Controllers[b]=a.Controllers[b]||new RS.Controller;var d=a.Controllers[b];return d.Name=b,c&&(c.PubSub||(c.PubSub=new RS.PubSub,c.PubSub.addEvent("change"))),d.setModel(c),d};var b=function(b){b=b||$(document);var c=b.find("*");c.each(function(){var b=$(this),c=a.getElementController(b,!0);if(c){var d=null;if(!b.data("in-binding")&&b.attr("data-bind")?(d=new RS.BoundElement(b),b.data("in-binding",!0)):!b.data("out-binding")&&(b.text()||"").indexOf("{{")>-1?(d=new RS.BoundElement(b),b.data("out-binding",!0)):!b.data("visibility-binding")&&b.attr("data-bind-visible")&&(d=new RS.BoundElement(b),b.data("visibility-binding",!0)),d&&c.bindElement(d),!b.data("click-binding")){var e=b.attr("data-bind-click");e&&b.click(function(){var c=a.getElementController(b);if(c&&c.Model&&c.Model[e]&&"function"==typeof c.Model[e])return c.Model[e](b),!1}),b.data("click-binding",!0)}}})};this.getElementController=function(b,c){if(!b)return null;var d=b.data("Controller");if(d)return d;var e=b.parents("[data-controller]:first");if(!e.length)return null;var f=e.attr("data-controller");return f?(d=a.Controllers[f],!d&&c&&(d=a.registerModel(f)),b.data("Controller",d),d):null},a.initialize()},RS.ControllersManager=new RS.ControllersManager;
Handlebars.registerHelper("getColumnValue",function(a,b,c){var d=a[b.Name];return d&&"DateTime"==b.Type&&(d=d.parseDate(),d=d.format(b.Format)),d}),Handlebars.registerHelper("showProperty",function(a,b,c){return b[a.Options.DisplayName||"Text"]}),Handlebars.registerHelper("json",function(a){return JSON.stringify(a)}),Handlebars.registerHelper("ifCond",function(a,b,c){return a===b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("random",function(a,b){return Math.floor(Math.random()*(b-a+1)+a)}),Handlebars.registerHelper("getCellValue",function(a,b,c){var d=a&&a.Cells&&a.Cells.length>c.data.index?a.Cells[c.data.index].Value:null;return d&&"DateTime"==b.Type&&(d=d.parseDate(),d=d.format(b.Format)),d}),Handlebars.registerHelper("getDataSetColumnValue",function(a,b,c){if(!a||!a.Options||!a.Columns||isNaN(a.Options.DisplayColumnIndex))return null;var d=b&&b.Cells&&b.Cells.length>a.Options.DisplayColumnIndex?b.Cells[a.Options.DisplayColumnIndex].Value:null,e=a.Columns[a.Options.DisplayColumnIndex];return d&&"DateTime"==e.Type&&(d=d.parseDate(),d=d.format(e.Format)),d}),RS.Controls={},RS.Controls.Control=function(a,b,c){var d=this;this.Options={Templates:null,IsEnabled:!0,Content:null,KeepOptionsFromStart:!1},a&&(d.Options=$.extend(d.Options,a)),d.Options=$.extend(d.Options,RS.Utils.getOptionsFromAttributes(b,"data-options")),this.Elements={Me:b},this.PubSub=new RS.PubSub,this.initialize=function(){return d.PubSub.addEvent("change"),d.initializeFromContainer(),d.initializeHtml(),d},this.initializeHtml=function(){return d.Elements.Me?(d.Elements.Me.data("control",d),d.Options.IsEnabled?d.enable():d.disable(),d):d},this.initializeFromContainer=function(){if(!b)return d;d.Options.IsEnabled="disabled"!=b.attr("disabled");var a=b.attr("data-template"),c=b.attr("data-item-template");if(!a&&!c)return d;var e=d.getDefaultTemplate();return e||(e={IsDefault:!0},d.Options.Templates||(d.Options.Templates=[]),d.Options.Templates.push(e)),a&&(e.Id=a),c&&(e.ItemTemplateId=c),d},this.appendTo=function(a,b){if(!(!a||d.Elements.Me&&a&&d.Elements.Me.parent()[0]==a[0])){if(d.Elements.Me)d.Elements.Me.remove();else{var c=d.generateHtml();if(!c)return;d.Elements.Me=$(c),d.Elements.Me.data("control",d)}var e=d.getChildren();if(e)for(var g=d.getChildrenContainer(),h=0;h<e.length;h++)e[h].appendTo(g);if(b){f(a,d.Elements.Me);var i=a.attr("id");a.replaceWith(d.Elements.Me),i&&d.Elements.Me.attr("id",i)}else a.append(d.Elements.Me);return d.initializeHtml()}},this.generateHtml=function(){var a=d.getDefaultTemplate();if(!a)return null;if(a.Compiled=a.Compiled||Handlebars.compile($("#"+a.Id).html()),!a.Compiled)return null;var b=a.Compiled({Control:d});return b},this.getTemplate=function(a){return d.Options.Templates&&d.Options.Templates.length?d.Options.Templates.findFirstKeyValue("Name",a):null},this.getDefaultTemplate=function(){if(!d.Options.Templates||!d.Options.Templates.length)return null;var a=d.Options.Templates.findFirstKeyValue("IsDefault",!0)||d.Options.Templates[0];return a},this.getChildrenContainer=function(){if(!d.Elements.Me)return null;var a=d.Elements.Me.find('[role="main"]:first');return a.length||(a=d.Elements.Me),a},this.setContent=function(a){d.Options.Content=a;var b=d.getChildrenContainer();if(b)return b.empty().append(a),d},this.disable=function(){e(!1)},this.enable=function(){e(!0)};var e=function(a){d.Elements.Me&&(d.Options.IsEnabled=a,a?d.Elements.Me.removeAttr("disabled"):d.Elements.Me.attr("disabled","disabled"))};this.getChildren=function(){return null},this.getIdentifier=function(){return"Control"},this.setValue=function(a,b,c){};var f=function(a,b){if(a&&b)for(var c=["data-control","data-options","data-source-options"],d=a.attrs(),e=0;e<d.length;e++){var f=d[e];if(f.Name&&!(c.findFirstIndex(function(a){return a==f.Name})>=0))if("class"==f.Name.toLowerCase())for(var g=a.attr("class").split(" "),h=0;h<g.length;h++){var i=g[h];i&&(b.hasClass(i)||b.addClass(i))}else b.attr(f.Name,f.Value)}};c||d.initialize()},RS.Controls.DataSource=function(a,b){var c=this;this.Options={Data:null,RemoteCall:{Url:null,Type:"GET",Parameters:null},Paging:{IsEnabled:!0},IsCaseSensitive:!1,IsComplex:!1},a&&(this.Options=$.extend(this.Options,a)),this.PubSub=null,this.IsLoading=!1,this.PageIndex=-1,this.FilteredData=null,this.HasMoreData=!0;var d=-1;this.initialize=function(){return c.PubSub=new RS.PubSub,c.PubSub.addEvent("refresh"),c.PubSub.addEvent("add"),c.PubSub.addEvent("remove"),c.PubSub.addEvent("clear"),c},this.goToNextPage=function(a){c.HasMoreData&&c.goToPage(c.PageIndex+1,a)},this.goToPage=function(b,d){a=a||{},a.PageIndex=b,c.loadData(a,d)},this.refresh=function(a,b){c.Options.Data&&c.Options.RemoteCall.Url&&c.clear({IsRefresh:!0}),a=a||{},a.IsRefresh=!0,c.loadData(a,b)},this.loadData=function(a,b){c.hasRemoteCall()?c.getRemoteData(a,function(c){h(a,c),b&&b()}):c.getLocalData(a,function(c){h(a,c),b&&b()})},this.hasRemoteCall=function(){return null!=c.Options.RemoteCall.Url},this.clear=function(a){c.PageIndex=-1,c.Options.Data=null,c.HasMoreData=!0,c.PubSub.triggerEvent("clear",{Source:c,Options:a})},this.addItem=function(a,b){if(!a)return c;if(c.Options.Data=c.Options.Data||[],b=Math.max(0,Math.min(c.Options.Data.length-1,b||c.Options.Data.length-1)),a instanceof Array)for(var d=0;d<a.length;d++)c.Options.Data.splice(b+d,0,a);else c.Options.Data.splice(b,0,a);return c.PubSub.triggerEvent("add",{Source:c,Items:a,Index:b}),c},this.removeItem=function(a,b){return c.Options.Data?(b=b||1,c.Options.Data.splice(a,b),c.PubSub.triggerEvent("add",{Source:c,Index:a,Number:b}),c):c},this.getParameter=function(a){if(c.Options.RemoteCall&&c.Options.RemoteCall.Parameters&&a){var b=c.Options.RemoteCall.Parameters.findFirst(function(b,c){return b.Name==a});return b}},this.setParameter=function(a,b,d){c.Options.RemoteCall.Parameters=e(c.Options.RemoteCall.Parameters,a,b,d)},this.buildUrl=function(){if(!c.Options.RemoteCall||!c.Options.RemoteCall.Url)return null;if(!c.Options.RemoteCall.Parameters||"GET"==c.Options.RemoteCall.Type)return c.Options.RemoteCall.Url;for(var a=c.Options.RemoteCall.Url+"?",b=0;b<c.Options.RemoteCall.Parameters.length;b++){var d=c.Options.RemoteCall.Parameters[b];d&&(d.Value||!d.Value&&d.IsMandatory)&&(a+=d.Name+"="+(d.Value||"")+"&")}return a};var e=function(a,b,c,d){if(!b)return a;a||(a=[]);for(var e=!1,f=0;f<a.length;f++){var g=a[f];(g.Name==b||g.Binding==b||g.Binding&&g.Binding.startsWith(b+"."))&&(g.Binding&&d&&(c=RS.Utils.getValue(d,g.Binding)),g.Value=c,e=!0)}return e||a.push({Name:b,Value:c}),a};this.getRemoteData=function(a,b){if(c.Options.RemoteCall){if(!f())return void c.clear();c.IsLoading=!0;var e=g(c.Options.RemoteCall.Parameters);if(c.Options.Paging.IsEnabled){e=e||[];var h=a?Math.max(0,a.PageIndex||c.PageIndex):0;c.Options.IsComplex?(e.Parameters=e.Parameters||[],e.Parameters.push({Name:"pageIndex",Value:h})):e.pageIndex=h,d=h}var i=c.buildUrl();i&&RS.Remote.call(c.Options.RemoteCall.Url,e,function(a){c.Options.Paging.IsEnabled&&(c.PageIndex=Math.max(c.PageIndex,e.pageIndex||0)),e.pageIndex==d&&(c.IsLoading=!1),b&&b(a)},c.Options.RemoteCall.Type)}};var f=function(){if(!c.Options.RemoteCall.Parameters)return!0;var a=c.Options.RemoteCall.Parameters.findFirst(function(a){return a.IsMandatory&&!a.Value});return null==a},g=function(a){if(!a)return null;for(var b={},d=0;d<a.length;d++){var e=a[d];c.Options.IsComplex?(b.Parameters=b.Parameters||[],b.Parameters.push({Name:e.Name,Value:e.Value})):b[e.Name]=e.Value}return b};this.getLocalData=function(a,b){var d=c.Options.Data;if(d){c.Options.IsComplex&&(d=c.Options.Data&&c.Options.Data.length?c.Options.Data[0]:null);var e=c.getParameter("term");e&&(c.Options.IsCaseSensitive||(e=e.toLowerCase()),d=$.grep(d,function(a,b){return a&&a.Text&&(c.Options.IsCaseSensitive&&a.Text.indexOf(e)>-1||!c.Options.IsCaseSensitive&&a.Text.toLowerCase().indexOf(e)>-1)}))}return b&&b(d),d},this.getDataSet=function(){return c.Options.Data?c.Options.IsComplex?c.Options.Data&&c.Options.Data.length?c.Options.Data[0].DataSet:null:c.Options.Data:null},this.getItemFromRow=function(a){if(!a||!a.Cells||!c.Options.IsComplex)return null;var b=c.getLocalData();if(!b||!b.Header||!b.Header.Columns)return null;for(var d={},e=0;e<Math.min(a.Cells.length,b.Header.Columns.length);e++){var f=b.Header.Columns[e];f&&(d[f.Name]=a.Cells[e].Value)}return d};var h=function(a,b){if(c.Options.Data=c.Options.Data||[],a&&a.IsRefresh&&(c.FilteredData=[]),c.FilteredData=c.FilteredData||[],c.hasRemoteCall()&&b){var d=!1;if(b instanceof Array){for(var e=0;e<b.length;e++)c.Options.Data.push(b[e]),c.FilteredData.push(b[e]);d=b.length>0}else c.Options.Data.push(b),c.FilteredData.push(b[e]),d=b[e]}d||(c.HasMoreData=!1),c.Options.RemoteCall.Url||(c.FilteredData=b),c.PubSub.triggerEvent("refresh",{Source:c,Options:a,Data:b})};b||c.initialize()},RS.Controls.Container=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"container-template"}]},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Container.superclass.constructor.call(this,d.Options,b,!0),this.getChildrenContainer=function(){return d.Elements.Me?d.Elements.Me.find('[role="main"]:first'):null},this.getIdentifier=function(){return"Container"},c||d.initialize()},extend(RS.Controls.Container,RS.Controls.Control),RS.Controls.NotificationTypes={Success:"alert-success",Info:"alert-info",Warning:"alert-warning",Danger:"alert-danger"},RS.Controls.Notification=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"notification-template"}],Type:RS.Controls.NotificationTypes.Info,Title:null,Message:null,IsPinned:!0,Position:{Top:null,Right:null,Bottom:null,Left:null},AutoHide:!0,AutoHideAfter:5e3,HideOnClick:!0};var e=null;a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Notification.superclass.constructor.call(this,d.Options,b,!0),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.Me.css({position:d.Options.IsPinned?"fixed":"relative",top:d.Options.Position.Top,right:d.Options.Position.Right,bottom:d.Options.Position.Bottom,left:d.Options.Position.Left}),d.Elements.Me.bind("mousedown",function(a){return d.Options.HideOnClick?(d.hide(),!1):void 0}),d.Elements.Me.find('[role="close"]').click(function(a){return d.hide(),!1}),d):d}),this.show=function(){return d.Elements.Me?(d.Elements.Me.show(),d.Options.AutoHide&&d.Options.AutoHideAfter&&(e&&clearTimeout(e),e=setTimeout(function(){d.hide()},d.Options.AutoHideAfter)),d):d},this.hide=function(){return d.Elements.Me?(e&&clearTimeout(e),d.Elements.Me.remove(),d):d},this.setType=function(a){return a=a||RS.Controls.NotificationTypes.Info,d.Options.Type=a,d.Elements.Me?(d.Elements.Me.removeClass("alert-success alert-info alert-warning alert-danger").addClass(a),d):d},this.initializeFromContainer=override(d.initializeFromContainer,function(){return b?(d.Options.Title=f(),d.Options.Message=g(),d.Options.Type=h(),d):void 0}),this.setTitle=function(a){return d.Options.Title=a,d.Elements.Me?(d.Elements.Me.find('[role="title"]').text(a),d):d};var f=function(){return d.Elements.Me?d.Elements.Me.find('[role="title"]').text():null};this.setMessage=function(a){return d.Options.Message=a,d.Elements.Me?(d.Elements.Me.find('[role="message"]').text(a),d):d};var g=function(){return d.Elements.Me?d.Elements.Me.find('[role="message"]').text():null},h=function(){return d.Elements.Me?d.Elements.Me.hasClass("alert-success")?RS.Controls.NotificationTypes.Success:d.Elements.Me.hasClass("alert-info")?RS.Controls.NotificationTypes.Info:d.Elements.Me.hasClass("alert-warning")?RS.Controls.NotificationTypes.Warning:d.Elements.Me.hasClass("alert-danger")?RS.Controls.NotificationTypes.Danger:RS.Controls.NotificationTypes.Info:RS.Controls.NotificationTypes.Info};this.getIdentifier=function(){return"Notification"},c||d.initialize()},extend(RS.Controls.Notification,RS.Controls.Control),RS.Controls.Notifier=function(a,b,c){var d=this;this.Options={IsPinned:!0,Position:{Top:null,Right:null,Bottom:null,Left:null},AutoHide:!0,AutoHideAfter:5e3,HideOnClick:!0,Container:null},a&&(d.Options=$.extend(d.Options,a)),d.Options.Container=d.Options.Container||$("body");var e=null;RS.Controls.Notifier.superclass.constructor.call(this,d.Options,b,!0),this.show=function(a,b,c){d.hide(),e=new RS.Controls.Notification({Title:c,Message:b,IsPinned:d.Options.IsPinned,Position:d.Options.Position,AutoHide:d.Options.AutoHide,AutoHideAfter:d.Options.AutoHideAfter,HideOnClick:d.Options.HideOnClick,Type:a}),e.appendTo(d.Options.Container),e.show()},this.showInfo=function(a,b){return d.show(RS.Controls.NotificationTypes.Info,a,b)},this.showWarning=function(a,b){return d.show(RS.Controls.NotificationTypes.Warning,a,b)},this.showDanger=function(a,b){return d.show(RS.Controls.NotificationTypes.Danger,a,b)},this.showSuccess=function(a,b){return d.show(RS.Controls.NotificationTypes.Success,a,b)},this.hide=function(){e&&e.hide()},this.getIdentifier=function(){return"Notifier"},c||d.initialize()},extend(RS.Controls.Notifier,RS.Controls.Control),RS.Controls.ButtonTypes={Default:"default",Primary:"primary",Success:"success",Info:"info",Warning:"warning",Danger:"danger",Link:"link"},RS.Controls.ButtonSizes={ExtraSmall:"btn-xs",Small:"btn-sm",Default:"",Large:"btn-lg"},RS.Controls.Orientations={Horizontal:"Horizontal",Vertical:"Vertical"},RS.Controls.Button=function(a,b,c){var d=this;this.Options={Type:RS.Controls.ButtonTypes.Default,Templates:[{IsDefault:!0,Id:"button-default-template"}],Size:RS.Controls.ButtonSizes.Default,IsBlock:!1,Icon:null,Image:null,Text:null},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Button.superclass.constructor.call(this,d.Options,b,!0),this.initialize=override(d.initialize,function(){return d.PubSub.addEvent("click"),d}),this.initializeHtml=override(d.initializeHtml,function(){return d.applyOptions(),d.Elements.Me?(d.Elements.Me.click(function(a){d.PubSub.triggerEvent("click",{Event:a,Source:d})}),d):d}),this.applyOptions=function(a){a=a||d.Options,d.setType(d.Options.Type),d.setSize(d.Options.Size),d.setBlock(d.Options.IsBlock),d.Options.Icon&&d.setIcon(d.Options.Icon),d.Options.Image&&d.setImage(d.Options.Image),d.Options.Text&&d.setText(d.Options.Text)},this.initializeFromContainer=override(d.initializeFromContainer,function(){return!b||d.Options.KeepOptionsFromStart?d:(d.Options.Type=e(),d.Options.Size=f(),d.Options.Text=g(),d.Options.IsBlock=b.hasClass("btn-block"),d.Options.Icon=(b.find('[role="img"]:first .glyphicon:first').attr("class")||"").replace("glyphicon-","").replace("glyphicon","").trim(),d.Options.Image=b.find('[role="img"]:first img:first').attr("src"),d)}),this.setType=function(a){return a=a||RS.Controls.ButtonTypes.Default,d.Options.Type=a,d.Elements.Me?(d.Elements.Me.removeClass("btn-default btn-primary btn-success btn-info btn-warning btn-danger btn-link").addClass("btn-"+a),d):d},this.setSize=function(a){return a=a||RS.Controls.ButtonSizes.Default,d.Options.Size=a,d.Elements.Me?(d.Elements.Me.removeClass("btn-xs btn-sm btn-lg").addClass(a),d):d},this.setBlock=function(a){return d.Options.IsBlock=a,d.Elements.Me?(a&&!d.Elements.Me.hasClass("btn-block")?d.Elements.Me.addClass("btn-block"):d.Elements.Me.removeClass("btn-block"),d):d},this.getChildrenContainer=function(){return d.Elements.Me?d.Elements.Me.find('[role="main"]:first'):null},this.setText=function(a){return d.Options.Text=a,d.setContent(a),d},this.setIcon=function(a){return d.Options.Icon=a,d.Elements.Me?(a?d.Elements.Me.find('[role="img"]').html('<span class="glyphicon glyphicon-'+a+'" aria-hidden="true"></span>'):d.Elements.Me.find('[role="img"]').empty(),d):d},this.setImage=function(a){return d.Options.Image=a,d.Elements.Me?(a?d.Elements.Me.find('[role="img"]').html('<img src="'+a+'" />'):d.Elements.Me.find('[role="img"]').empty(),d):d};var e=function(){return d.Elements.Me?d.Elements.Me.hasClass("btn-primary")?RS.Controls.ButtonTypes.Primary:d.Elements.Me.hasClass("btn-success")?RS.Controls.ButtonTypes.Success:d.Elements.Me.hasClass("btn-info")?RS.Controls.ButtonTypes.Info:d.Elements.Me.hasClass("btn-warning")?RS.Controls.ButtonTypes.Warning:d.Elements.Me.hasClass("btn-danger")?RS.Controls.ButtonTypes.Danger:d.Elements.Me.hasClass("btn-link")?RS.Controls.ButtonTypes.Link:RS.Controls.ButtonTypes.Default:RS.Controls.ButtonTypes.Default},f=function(){return d.Elements.Me?d.Elements.Me.hasClass("btn-xs")?RS.Controls.ButtonSizes.ExtraSmall:d.Elements.Me.hasClass("btn-sm")?RS.Controls.ButtonSizes.Small:d.Elements.Me.hasClass("btn-lg")?RS.Controls.ButtonSizes.Large:RS.Controls.ButtonSizes.Default:RS.Controls.ButtonSizes.Default},g=function(){return d.Elements.Me?d.Elements.Me.find('[role="main"]').text():null};this.getIdentifier=function(){return"Button"},c||d.initialize()},extend(RS.Controls.Button,RS.Controls.Control),RS.Controls.ToggleButton=function(a,b,c){var d=this;this.Options={IsChecked:!1,CanToggle:!0},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.ToggleButton.superclass.constructor.call(this,d.Options,b,!0),this.initialize=override(d.initialize,function(){return d.PubSub.addEvent("toggle"),d.PubSub.addListener("click",function(){d.setChecked(!d.Options.IsChecked)}),d}),this.initializeHtml=override(d.initializeHtml,function(){return d.setChecked(d.Options.IsChecked),d}),this.initializeFromContainer=override(d.initializeFromContainer,function(){return b?(d.Options.IsChecked=e(),d):void 0}),this.setChecked=function(a){return d.Options.IsChecked!=a&&d.Options.CanToggle?(d.Options.IsChecked=a,d.PubSub.triggerEvent("toggle",{Source:d,IsChecked:a}),d.Elements.Me?(a?d.Elements.Me.hasClass("active")||d.Elements.Me.addClass("active"):d.Elements.Me.removeClass("active"),d):d):d};var e=function(){return d.Elements.Me?d.Elements.Me.hasClass("active"):!1};this.getIdentifier=function(){return"ToggleButton"},c||d.initialize()},extend(RS.Controls.ToggleButton,RS.Controls.Button),RS.Controls.ButtonGroup=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"button-group-template"}],Size:RS.Controls.ButtonSizes.Default,Orientation:RS.Controls.Orientations.Horizontal,IsJustified:!1,Buttons:[],AllowMultipleToggle:!0},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.ButtonGroup.superclass.constructor.call(this,d.Options,b,!0),this.initialize=override(d.initialize,function(){if(d.Options.Buttons)for(var a=0;a<d.Options.Buttons.length;a++)d.addButton(d.Options.Buttons[a],!0);return d.PubSub.addEvent("select"),d}),this.initializeHtml=override(d.initializeHtml,function(){return d.setSize(d.Options.Size),d.setOrientation(d.Options.Orientation),d.setJustification(d.Options.IsJustified),d}),this.setSize=function(a){if(a=a||RS.Controls.ButtonSizes.Default,d.Options.Size=a,!d.Elements.Me)return d;d.Elements.Me.removeClass("btn-group-xs btn-group-sm btn-group-lg");var b="";switch(a){case RS.Controls.ButtonSizes.ExtraSmall:b="btn-group-xs";break;case RS.Controls.ButtonSizes.Small:b="btn-group-sm";break;case RS.Controls.ButtonSizes.Large:b="btn-group-lg"}return b&&d.Elements.Me.addClass(b),d},this.setJustification=function(a){return d.Options.IsJustified=a,d.Elements.Me?(a?d.Elements.Me.addClass("btn-group-justified"):d.Elements.Me.removeClass("btn-group-justified"),d):d},this.setOrientation=function(a){return a=a||RS.Controls.Orientations.Horizontal,d.Options.Orientation=a,d.Elements.Me?(d.Elements.Me.removeClass("btn-group btn-group-vertical").addClass(a==RS.Controls.Orientations.Horizontal?"btn-group":"btn-group-vertical"),d):d},this.addButton=function(a,b,c){return a?(d.Options.Buttons=d.Options.Buttons||[],b||d.Options.Buttons.push(a),d.Elements.Me&&!c&&a.appendTo(d.getChildrenContainer()),a instanceof RS.Controls.ToggleButton&&a.PubSub.addListener("toggle",function(b){if(b.IsChecked&&!d.Options.AllowMultipleToggle&&a instanceof RS.Controls.ToggleButton){a.Options.CanToggle=!1;for(var c=0;c<d.Options.Buttons.length;c++){var e=d.Options.Buttons[c];e!=a&&e instanceof RS.Controls.ToggleButton&&(e.Options.CanToggle=!0,e.setChecked(!1))}}}),a.PubSub.addListener("click",function(b){b.Index=d.Options.Buttons.findFirstIndex(function(b,c){return b==a}),b.Button=a,d.PubSub.triggerEvent("select",b)}),d):d},this.removeButton=function(a){if(!a||!d.Options.Buttons)return d;var b=d.Options.Buttons.findFirstIndex(function(b,c){return b==a});return 0>b?d:(d.Options.Buttons.splice(b,1),void(a.Elements.Me&&a.Elements.Me.remove()))},this.initializeFromContainer=override(d.initializeFromContainer,function(){return b?(d.Options.Size=f(),d.Options.Orientation=g(),d.Options.IsJustified=h(),d.Options.Buttons=e(),d):void 0}),this.getChildrenContainer=function(){return d.Elements.Me},this.getChildren=function(){return d.Options.Buttons};var e=function(){return d.Elements.Me?void d.getChildrenContainer().find('> [role="button"]').each(function(){var a=$(this).getControl();a&&d.addButton(a,!1,!0)}):null},f=function(){return d.Elements.Me?d.Elements.Me.hasClass("btn-group-xs")?RS.Controls.ButtonSizes.ExtraSmall:d.Elements.Me.hasClass("btn-group-sm")?RS.Controls.ButtonSizes.Small:d.Elements.Me.hasClass("btn-group-lg")?RS.Controls.ButtonSizes.Large:RS.Controls.ButtonSizes.Default:RS.Controls.ButtonSizes.Default},g=function(){return d.Elements.Me&&d.Elements.Me.hasClass("btn-group-vertical")?RS.Controls.Orientations.Vertical:RS.Controls.Orientations.Horizontal},h=function(){return d.Elements.Me?d.Elements.Me.hasClass("btn-group-justified"):!1};this.getIdentifier=function(){return"ButtonGroup"},c||d.initialize()},extend(RS.Controls.ButtonGroup,RS.Controls.Control),RS.Controls.ModalSizes={Small:"modal-sm",Default:"",Large:"modal-lg"},RS.Controls.ModalButton=function(a,b,c){var d=this;this.Options={IsDismiss:!1,Callback:null},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.ModalButton.superclass.constructor.call(this,d.Options,b,!0),this.getIdentifier=function(){return"ModalButton"},c||d.initialize()},extend(RS.Controls.ModalButton,RS.Controls.Button),RS.Controls.Modal=function(a,b,c){var d=this;d.Options={Templates:[{IsDefault:!0,Id:"modal-template"}],Title:null,Buttons:null,DestroyAfterClose:!1,Parent:$("body"),Overlay:!1,Size:RS.Controls.ModalSizes.Default,Content:null,CloseOnClickOutside:!0,Width:null,IsFixed:!0},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Modal.superclass.constructor.call(this,d.Options,b,!0),this.Notifier=null,this.initialize=override(d.initialize,function(){return d.PubSub.addEvent("show"),d.PubSub.addEvent("hide"),d.PubSub.addEvent("destroy"),d.PubSub.addEvent("select"),d}),this.initializeFromContainer=override(d.initializeFromContainer,function(){return b?(d.Options.Title=e(),d.Options.Size=f(),d.Options.IsFixed="fixed"==d.Elements.Me.css("display"),d):void 0}),this.setContent=function(a){if(!d.Elements.Me)return d;var b=d.Elements.Me.find('[role="dialog"]:first [role="main"]:first');return b.empty().append(a),d},this.show=function(){if(!d.Elements.Me||!d.Elements.Me.parent()){if(d.Options.Parent=d.Options.Parent||$("body"),d.appendTo(d.Options.Parent),d.setSize(d.Options.Size),$(document).keydown(function(a){return a.keyCode==RS.Keys.ESCAPE?(d.hide(),!1):void 0}),d.Elements.Me.mousedown(function(a){d.Options.CloseOnClickOutside&&$(a.target)[0]==d.Elements.Me[0]&&d.hide()}),d.Options.Buttons)for(var a=d.Elements.Me.find('[role="footer"]'),b=0;b<d.Options.Buttons.length;b++){var c=d.Options.Buttons[b];c.PubSub.addListener("click",function(a){a.Index=d.Options.Buttons.findFirstIndex(function(b,c){return b==a.Source}),a.Button=a.Source,d.PubSub.triggerEvent("select",a),a.Index>-1&&d.Options.Buttons[a.Index]&&d.Options.Buttons[a.Index].Options.Callback&&d.Options.Buttons[a.Index].Options.Callback({Source:d}),a.Button.Options.IsDismiss&&d.hide()}),c.appendTo(a)}d.Notifier=new RS.Controls.Notifier({Container:d.Elements.Me.find('[role="alert"]')})}if(!d.Elements.Me)return d;if(d.Options.Overlay){var e=d.Options.Parent.find(".modal-backdrop");e.length?e.show():d.Options.Parent.append('<div class="modal-backdrop fade in"></div>')}return d.Options.IsFixed?d.Elements.Me.css({position:"fixed",bottom:"0"}):d.Elements.Me.css({position:"absolute",bottom:"auto"}),d.Elements.Me.show(),d.PubSub.triggerEvent("show",{Source:d}),d},this.hide=function(){return d.Elements.Me?(d.Elements.Me.hide(),d.Options.Parent.find(".modal-backdrop").hide(),d.PubSub.triggerEvent("hide",{Source:d}),d.Options.DestroyAfterClose&&d.destroy(),d):d},this.destroy=function(){return d.Elements.Me?(d.Elements.Me.remove(),d.Elements.Me=null,d.PubSub.triggerEvent("destroy",{Source:d}),d):d},this.setTitle=function(a){return d.Options.Title=a,d.Elements.Me?(d.Elements.Me.find('[role="title"]').text(a),d):d},this.setSize=function(a){return a=a||RS.Controls.ModalSizes.Default,d.Options.Size=a,d.Elements.Me?(d.Elements.Me.find('[role="dialog"]').removeClass("modal-sm modal-lg").addClass(a),d.Options.Width&&d.Elements.Me.find('[role="dialog"]').width(d.Options.Width),d):d},this.toggleButtonVisibility=function(a,b){if(d.Options.Buttons){var c=d.Elements.Me.find('[role="footer"]'),e=c.find('> [role="button"]:eq('+a+")");b===!0?e.show():b===!1?e.hide():e.toggle()}};var e=function(){return d.Elements.Me?d.Elements.Me.find('[role="title"]').text():null},f=function(){if(!d.Elements.Me)return RS.Controls.ModalSizes.Default;var a=d.Elements.Me.find('[role="dialog"]');return a.hasClass(RS.Controls.ModalSizes.Small)?RS.Controls.ModalSizes.Small:a.hasClass(RS.Controls.ModalSizes.Large)?RS.Controls.ModalSizes.Large:RS.Controls.ModalSizes.Default};this.getIdentifier=function(){return"Modal"},c||d.initialize()},extend(RS.Controls.Modal,RS.Controls.Control),RS.Controls.Tooltip=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"tooltip-template"}],Parent:null,Content:null,Position:"top",AutoHide:!0,Trigger:"hover"};var e=null;a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Tooltip.superclass.constructor.call(this,d.Options,b,!0),this.initialize=override(d.initialize,function(){return d.Options.Parent?(d.PubSub.addEvent("show"),d.PubSub.addEvent("hide"),d.Options.Parent.mousedown(function(a){"click"==d.Options.Trigger&&(d.Elements.Me&&d.Elements.Me.is(":visible")||d.show())}),d.Options.Parent.hover(function(){"hover"==d.Options.Trigger&&d.show()},function(){"hover"==d.Options.Trigger&&d.Options.AutoHide&&d.hide()}),d):d}),this.show=function(){d.Elements.Me||(d.appendTo(d.Options.Parent.parent()),d.Elements.Me.mousedown(function(a){return d.Options.AutoHide&&"click"!=d.Options.Trigger||d.hide(),!1}));var a=g(d.Options.Position);return e=d.Options.Position,a.y<0?(d.setPosition("bottom",!0),a=g("bottom")):a.x<0&&(d.setPosition("right",!0),a=g("right")),f(a),d.Elements.Me.offset().top+d.Elements.Me.outerHeight()>$(document).height()?(d.setPosition("top",!0),a=g("top"),f(a)):d.Elements.Me.offset().left+d.Elements.Me.outerWidth()>$(document).width()&&(d.setPosition("left",!0),a=g("left"),f(a)),d.Elements.Me.show(),d.PubSub.triggerEvent("show",{Source:d}),d},this.hide=function(){return d.Elements.Me?(d.Elements.Me.hide(),d.setPosition(d.Options.Position),d.PubSub.triggerEvent("hide",{Source:d}),d):d},this.setPosition=function(a,b){return a=a||"right",b||(d.Options.Position=a),d.Elements.Me?(d.Elements.Me.removeClass("top right bottom left").addClass(a),d):d};var f=function(a){d.Elements.Me&&a&&d.Elements.Me.css({left:a.x,top:a.y})},g=function(a){var b=0,c=0,e="fixed"==d.Options.Parent.css("position")?d.Options.Parent.offset():d.Options.Parent.position();return"top"==a?(b=e.left+d.Options.Parent.outerWidth()/2-d.Elements.Me.outerWidth()/2,c=e.top-d.Elements.Me.outerHeight()):"right"==a?(b=e.left+d.Options.Parent.outerWidth(),c=e.top+d.Options.Parent.outerHeight()/2-d.Elements.Me.outerHeight()/2):"bottom"==a?(b=e.left+d.Options.Parent.outerWidth()/2-d.Elements.Me.outerWidth()/2,c=e.top+d.Options.Parent.outerHeight()):"left"==a&&(b=e.left-d.Elements.Me.outerWidth(),c=e.top+d.Options.Parent.outerHeight()/2-d.Elements.Me.outerHeight()/2),{x:b,y:c}};this.getIdentifier=function(){return"Tooltip"},c||d.initialize()},extend(RS.Controls.Tooltip,RS.Controls.Control),RS.Controls.Popover=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"popover-template"}],Title:null},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Popover.superclass.constructor.call(this,d.Options,b,!0),this.setTitle=function(a){return d.Options.Title=a,d.Elements.Me?(d.Elements.Me.find('[role="title"]:first').text(a),d):d},this.getIdentifier=function(){return"Popover"},c||d.initialize()},extend(RS.Controls.Popover,RS.Controls.Tooltip),RS.Controls.DataControl=function(a,b,c){var d=this;this.Options={DataSource:null,Paging:{HasContinuousPagination:!1,ContinuousPaginationScrollingParent:null},Search:{CanSearch:!1,Placeholder:"Search...",MinLength:3,Delay:250,IsCaseSensitive:!1},HighlightFirst:!1,CanSelect:!0,CanSelectMultiple:!1,CanHighlight:!0,RefreshAfterDataSourceChanged:!0,DisplayColumn:"Text"},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.DataControl.superclass.constructor.call(this,d.Options,b,!0),this.Elements.List=null,this.HighlightedIndex=-1,this.SelectedIndex=-1,this.SelectedItem=null,this.SelectedItems=null;var e=null,f=null,g=null,h=null;this.initialize=override(d.initialize,function(){return d.PubSub.addEvent("highlight"),d.PubSub.addEvent("select"),d.PubSub.addEvent("unselect"),d.PubSub.addEvent("enter"),j(d.Options.DataSource),d}),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.Search=d.Elements.Me.find('[role="search"]:first'),d.Elements.List="list"==d.Elements.Me.attr("role")?d.Elements.Me:d.Elements.Me.find('[role="list"]:first'),d.setCanSearch(d.Options.Search.CanSearch),d.setPlaceholder(d.Options.Search.Placeholder),d.setContinuousPaginationScrollingParent(d.Options.Paging.ContinuousPaginationScrollingParent||d.Elements.Me.parent()),d.Elements.List.on("click",'[role="listitem"]',function(a){if(!d.Options.CanSelect)return!0;var b=$(this),c=b.parent().children().index(b);return d.selectIndex(c),!1}),d.Elements.List.on("dblclick",'[role="listitem"]',function(a){var b=$(this),c=b.parent().children().index(b);d.PubSub.triggerEvent("enter",{Source:d,Index:c})}),d.Elements.Search.keyup(function(a){return l(a),!1}),d.Elements.Me.keydown(function(a){if(a.keyCode==RS.Keys.DOWN)return d.highlightIndex(d.HighlightedIndex+1),!1;if(a.keyCode==RS.Keys.UP)return d.highlightIndex(d.HighlightedIndex-1),!1;if(a.keyCode==RS.Keys.ENTER||a.keyCode==RS.Keys.SPACE&&d.Elements.Search&&!d.Elements.Search.val())return d.selectIndex(d.HighlightedIndex),!1;if(a.keyCode==RS.Keys.HOME&&!a.shiftKey)return d.highlightIndex(0),!1;if(a.keyCode==RS.Keys.END&&!a.shiftKey)return d.highlightIndex(1/0),!1;if(a.keyCode==RS.Keys.PAGE_UP||a.keyCode==RS.Keys.PAGE_DOWN){var b=Math.round(d.Elements.List.height()/(d.Elements.List.find('[role="listitem"]:first').height()||30));return a.keyCode==RS.Keys.PAGE_UP?d.highlightIndex(d.HighlightedIndex-b):d.highlightIndex(d.HighlightedIndex+b),!1}return!0}),d.Elements.Me.bind("focusin",function(a){if(d.IsOpen&&d.Options.Search.CanSearch&&d.Elements.Search){if($(a.target)[0]==d.Elements.Search[0])return!0;d.Elements.Search.focus()}}),i(d.Options.DataSource),d):d}),this.initializeFromContainer=override(d.initializeFromContainer,function(){if(!b)return d;var a=d.getDataSourceFromContainer();return a&&d.setDataSource(a,!1),d}),this.getDataSourceFromContainer=function(){if(!b)return null;var a=null,c=RS.Utils.getOptionsFromAttributes(b,"data-source-options")||{};return c?a=new RS.Controls.DataSource(c):null},this.setContinuousPaginationScrollingParent=function(a){return d.Options.Paging.ContinuousPaginationScrollingParent="string"==typeof a?$(a):a,d.Options.Paging.HasContinuousPagination&&d.Options.Paging.ContinuousPaginationScrollingParent&&d.Options.Paging.ContinuousPaginationScrollingParent.scroll(function(){return d.checkIfShouldLoadNextPageForContinuousPagination()?!1:void 0}),d},this.checkIfShouldLoadNextPageForContinuousPagination=function(){if(!d.Options.DataSource||d.Options.DataSource.IsLoading||!d.Options.Paging.HasContinuousPagination||!d.Options.DataSource.Options.RemoteCall.Url)return!1;var a=d.Options.Paging.ContinuousPaginationScrollingParent;
return a[0]==document&&$(window).scrollTop()+$(window).height()==$(document).height()?(d.Options.DataSource.goToNextPage(),!0):a.scrollTop()+a.innerHeight()>=a[0].scrollHeight?(d.Options.DataSource.goToNextPage(),!0):!1},this.setCanSearch=function(a){return d.Options.Search.CanSearch=a,d.Elements.Me?(a?(d.Options.DataSource&&(d.Options.DataSource.IsCaseSensitive=d.Options.Search.IsCaseSensitive),d.Elements.Search.show(),d.Elements.List.hasClass("search")||d.Elements.List.addClass("search")):(d.Elements.Search.hide(),d.Elements.List.removeClass("search")),d):d},this.setPlaceholder=function(a){return d.Options.Search.Placeholder=a,d.Elements.Me?(d.Elements.Search.attr("placeholder",a),d):d},this.highlightIndex=function(a){if(!d.Options.CanHighlight||!d.Options.DataSource||!d.Options.DataSource.Options.Data)return d;var b=d.Options.Search.CanSearch?d.Options.DataSource.FilteredData||d.Options.DataSource.Options.Data:d.Options.DataSource.getDataSet();return b&&d.Options.DataSource.Options.IsComplex&&(b=b.Rows),a=Math.max(0,Math.min(a||0,b.length-1)),d.HighlightedIndex==a?d:(e&&e.removeClass("active"),e=d.Elements.List.find('> [role="listitem"]:eq('+a+")"),e.addClass("active"),d.HighlightedIndex=a,k(e),d.PubSub.triggerEvent("highlight",{Source:d,Index:a}),d)},this.canSelect=function(a){return!0},this.processItem=function(a){var b=d.Options.DataSource;if(b&&b.Options.IsComplex){var c=b.getItemFromRow(a);return c}return a},this.selectIndex=function(a){if(!(d.canSelect(a)&&d.Options.CanSelect&&d.Options.DataSource&&d.Options.DataSource.Options.Data))return d;d.Options.CanHighlight&&d.highlightIndex(a);var b=d.Options.Search.CanSearch?d.Options.DataSource.FilteredData||d.Options.DataSource.Options.Data:d.Options.DataSource.getDataSet();if(b&&d.Options.DataSource.Options.IsComplex&&(b=b.Rows),a=Math.max(0,Math.min(a||0,b.length-1)),d.SelectedIndex==a&&!d.Options.CanSelectMultiple)return d;if(d.SelectedIndex=a,d.SelectedItem=d.processItem(b[a]),d.Options.CanSelectMultiple){if(d.SelectedItem.IsSelected=!d.SelectedItem.IsSelected,d.SelectedItem.IsSelected)d.SelectedItems=d.SelectedItems||[],d.SelectedItems.push(d.SelectedItem);else{var c=d.SelectedItems.findFirstKeyIndex("Id",d.SelectedItem.Id);c>-1&&d.SelectedItems.splice(c,1)}var e=d.Elements.List.find('> [role="listitem"]:eq('+a+")");e.toggleClass("selected")}return!d.Options.CanSelectMultiple||d.Options.CanSelectMultiple&&d.SelectedItem.IsSelected?(d.PubSub.triggerEvent("select",{Source:d,Index:a,Item:d.SelectedItem}),d.PubSub.triggerEvent("change",{Source:this,Property:"SelectedIndex"})):d.Options.CanSelectMultiple&&(d.PubSub.triggerEvent("unselect",{Source:d,Index:a,Item:d.SelectedItem}),d.PubSub.triggerEvent("change",{Source:this,Property:"SelectedIndex"})),d},this.deselect=function(){(d.SelectedItem||d.SelectedItems)&&(d.HighlightedIndex=-1,e&&e.removeClass("active"),d.Elements.List.find('> [role="listitem"]').removeClass("selected"),d.PubSub.triggerEvent("unselect",{Source:d,Index:d.SelectedIndex,Item:d.SelectedItem}),d.SelectedIndex=-1,d.SelectedItem=null,d.SelectedItems=null,d.PubSub.triggerEvent("change",{Source:this,Property:"SelectedIndex"}),d.PubSub.triggerEvent("select",{Source:d,Index:-1,Item:null}))},this.setDataSource=function(a,b){return d.Options.DataSource==a?d:(d.Options.DataSource=a,i(a),j(a),a&&d.Options.RefreshAfterDataSourceChanged&&b!==!1&&a.refresh(),d)};var i=function(a){if(a&&a.Options.RemoteCall&&a.Options.RemoteCall.Url&&d.Elements.Me){var b=RS.ControllersManager.getElementController(d.Elements.Me,!0);if(b&&b.PubSub){if(b.Model&&a.Options.RemoteCall.Parameters)for(var c=0;c<a.Options.RemoteCall.Parameters.length;c++){var e=a.Options.RemoteCall.Parameters[c];if(e&&e.Name){var f=e.Binding||e.Name,g=f.split(".");if(g&&g.length&&g[0]in b.Model){a.Options.RemoteCall.BoundModelParameters=a.Options.RemoteCall.BoundModelParameters||{},a.Options.RemoteCall.BoundModelParameters[g[0]]=1;var h=RS.Utils.getValue(b.Model,f);a.setParameter(e.Name,h)}}}b.PubSub.addListener("change",function(c){a.Options.RemoteCall.BoundModelParameters&&1==a.Options.RemoteCall.BoundModelParameters[c.Property]&&(a.setParameter(c.Property,c.Value,b.Model),d.reactToParameterChange(c))})}}};this.reactToParameterChange=function(a){a&&d.Options.DataSource&&d.Options.DataSource.refresh()};var j=function(a){a&&h!=a&&(h=a,d.Options.Search.CanSearch&&(a.Options.IsCaseSensitive=d.Options.Search.IsCaseSensitive),a.PubSub.addListener("refresh",function(a){d.renderItems(a.Options,a.Data)}),a.PubSub.addListener("add",function(a){d.renderItems({Index:a.Index},a.Items)}),a.PubSub.addListener("clear",function(a){d.clear(a.Options)}))};this.search=function(a){(a||"")!=(f||"")&&(a&&d.Options.Search.MinLength&&(a||"").length<d.Options.Search.MinLength||(f=a,d.Options.DataSource.setParameter("term",a),d.Options.DataSource.refresh()))},this.clear=function(a){a&&a.IsRefresh||d.Elements.List&&(d.HighlightedIndex=-1,d.SelectedIndex=-1,d.SelectedItem=null,d.Elements.List.empty(),d.PubSub.triggerEvent("change",{Source:this,Property:"SelectedIndex"}),d.PubSub.triggerEvent("select",{Source:d,Index:-1,Item:null}))};var k=function(a){if(a){var b=a.position();if(b){var c=-1;b.top<0?c=d.Elements.List.scrollTop()+b.top:b.top+a.height()>d.Elements.List.height()&&(c=d.Elements.List.scrollTop()+b.top+a.height()-d.Elements.List.height()),c>=0&&d.Elements.List.scrollTop(c)}}},l=function(a){var b=d.Elements.Search.val();d.Elements.Search&&d.Options.Search.CanSearch&&d.Options.DataSource&&a.keyCode!=RS.Keys.ENTER&&(a.keyCode!=RS.Keys.SPACE||b)&&(g&&clearTimeout(g),d.Options.Search.Delay?g=setTimeout(function(){d.search(b)},d.Options.Search.Delay):d.search(b))};this.processDataBeforeRendering=function(a){return a||[]},this.renderItems=function(a,b){if(!d.Elements.Me)return d;if(a&&a.IsRefresh&&(d.clear(),d.Elements.List&&d.Elements.List.scrollTop()),b=d.processDataBeforeRendering(b)||[],b&&d.Options.CanSelectMultiple&&d.SelectedItems&&d.SelectedItems.length)for(var c=0;c<b.length;c++){var e=b[c];d.SelectedItems.findFirstKeyIndex("Id",e.Id)>-1&&(e.IsSelected=!0)}var f=d.getDefaultTemplate();if(!f)return null;f.ItemCompiled=f.ItemCompiled||Handlebars.compile($("#"+f.ItemTemplateId).html());var g=d.getItemsHtml(b,f),h=d.Elements.List.children().length,i=Math.max(0,Math.min(h,a&&a.Index?a.Index-1:h));if(i>=h)d.Elements.List.append(g);else{var j=d.Elements.List.find('> [role="listitem"]:eq('+i+")");j.after(g)}return a&&a.IsRefresh&&d.Options.HighlightFirst&&d.highlightIndex(0),d},this.getItemsHtml=function(a,b){if(!b)return null;var c=b.ItemCompiled({Items:a,Control:d});return c},this.getIdentifier=function(){return"DataControl"},this.setValue=override(d.setValue,function(a,b,c){"SelectedIndex"==b&&d.selectIndex(a)}),this.getSelectedRow=function(){if(!d.SelectedItem)return null;var a=d.Options.DataSource;if(!a||!a.Options.IsComplex)return null;var b=a.getDataSet();return!b||!b.Rows||d.SelectedIndex>=b.Rows.length?null:b.Rows[d.SelectedIndex]},c||d.initialize()},extend(RS.Controls.DataControl,RS.Controls.Control),RS.Controls.Dropdown=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"dropdown-template",ItemTemplateId:"dropdown-item-template",SelectedItemTemplateId:"dropdown-selected-item-template"}],SelectText:"Select",Paging:{HasContinuousPagination:!0},CloseAfterSelect:!0,CanSelect:!0,CanHighlight:!0,DisplayName:"Text"},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Dropdown.superclass.constructor.call(this,d.Options,b,!0),this.Elements.Me=null,this.Elements.Popover=null,this.IsOpen=!1;var e=!1;this.initialize=override(d.initialize,function(){if(d.PubSub.addEvent("open"),d.PubSub.addEvent("close"),!c){var a=d.getDefaultTemplate();a.SelectedItemTemplateId&&Handlebars.registerPartial("DropdownSelectedItemTemplate",$("#"+a.SelectedItemTemplateId).html())}return d}),this.getDataSourceFromContainer=override(d.getDataSourceFromContainer,function(){if(!b)return null;if("select"==b[0].tagName.toLowerCase()){var a=[];b.find("option").each(function(){var b=$(this),c={Value:b.attr("value"),Text:b.text()};a.push(c)})}var c=RS.Utils.getOptionsFromAttributes(b,"data-source-options")||{};a&&(c.Data=a);var d=new RS.Controls.DataSource(c);return d}),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.Popover=d.Elements.Me.find('[role="popover"]:first'),d.Elements.Me.find('[role="dropdown-toggle"]').click(function(){return d.toggle(),!1}),d.setContinuousPaginationScrollingParent(d.Elements.List),g(),d):d}),this.canSelect=function(a){return d.IsOpen},this.selectIndex=override(d.selectIndex,function(a){if(!d.Elements.Me)return d;if(d.Options.CanSelectMultiple)g(d.SelectedItems.length);else{var b=d.getDefaultTemplate();if(b&&b.SelectedItemTemplateId){b.SelectedItemCompiled=b.SelectedItemCompiled||Handlebars.compile($("#"+b.SelectedItemTemplateId).html());var c=d.generateSelectedItemHtml();d.Elements.Me.find('[role="main"]:first').html(c)}}return d.Options.CloseAfterSelect&&d.close(),d}),this.generateSelectedItemHtml=function(){var a=d.getDefaultTemplate(),b=a.SelectedItemCompiled(d.SelectedItem);return b},this.open=function(){return!d.Elements.Me||d.IsOpen?d:(d.IsOpen=!0,d.Elements.Popover&&d.Elements.Popover.show(),d.Options.Search.CanSearch&&d.Elements.Search&&d.Elements.Search.focus(),e||(d.Options.DataSource&&d.Options.DataSource.loadData(),e=!0),$(document).bind("mousedown",f),d.PubSub.triggerEvent("open",{Source:d}),d)},this.close=function(){return d.Elements.Me&&d.IsOpen?(d.IsOpen=!1,d.Elements.Popover&&d.Elements.Popover.hide(),d.PubSub.triggerEvent("hide",{Source:d}),$(document).unbind("mousedown",f),d):d},this.toggle=function(){return d.IsOpen?d.close():d.open()},this.getSummaryElement=function(){return d.Elements.Me.find('[role="main"]:first')},this.reactToParameterChange=function(a){a&&d.Options.DataSource&&d.Options.DataSource.clear()},this.deselect=override(d.deselect,function(){g(0)}),this.clear=override(d.clear,function(){e=!1,g(0)});var f=function(a){return d.Elements.Me&&d.IsOpen?RS.Utils.isInsideElement({x:a.pageX,y:a.pageY},d.Elements.List)||RS.Utils.isInsideElement({x:a.pageX,y:a.pageY},d.Elements.Me)?void 0:d.close():!0},g=function(a){if(!d.Options.CanSelectMultiple)return void d.getSummaryElement().html(d.Options.SelectText);a=a||0;var b=a+" selected";d.getSummaryElement().html(b)};this.getIdentifier=function(){return"Dropdown"},c||(d.initialize(),d.appendTo(b,!0))},extend(RS.Controls.Dropdown,RS.Controls.DataControl),RS.Controls.ButtonDropdown=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"button-dropdown-template",ItemTemplateId:"button-dropdown-item-template"}],CanHighlight:!1,Text:"Action"},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.ButtonDropdown.superclass.constructor.call(this,d.Options,b,!0),this.Button=null,this.initializeHtml=override(d.initializeHtml,function(){if(!d.Elements.Me)return d;var a=RS.Core.copy(d.Options,!0);return a.KeepOptionsFromStart=!0,d.Button=new RS.Controls.Button(a,d.Elements.Me.find('[role="dropdown-toggle"]:first')),d}),this.getIdentifier=function(){return"ButtonDropdown"},c||d.initialize()},extend(RS.Controls.ButtonDropdown,RS.Controls.Dropdown),RS.Controls.SplitButton=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"splitbutton-template",ItemTemplateId:"splitbutton-item-template"}],CanHighlight:!1,Text:"Action"},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.SplitButton.superclass.constructor.call(this,d.Options,b,!0),this.Button=null,this.DropdownButton=null,this.initializeHtml=override(d.initializeHtml,function(){if(!d.Elements.Me)return d;var a=RS.Core.copy(d.Options,!0);return a.KeepOptionsFromStart=!0,d.Button=new RS.Controls.Button(a,d.Elements.Me.find('[role="button"]:first')),a=RS.Core.copy(d.Options,!0),a.KeepOptionsFromStart=!0,d.DropdownButton=new RS.Controls.Button(a,d.Elements.Me.find('[role="dropdown-toggle"]:first')),d}),this.getIdentifier=function(){return"SplitButton"},c||d.initialize()},extend(RS.Controls.SplitButton,RS.Controls.Dropdown),RS.Controls.List=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"list-template",ItemTemplateId:"list-item-template"}],Paging:{HasContinuousPagination:!1},CanSelect:!0,CanHighlight:!0,DisplayName:"Name"},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.List.superclass.constructor.call(this,d.Options,b,!0),this.Elements.Me=null,this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Options.DataSource&&d.Options.DataSource.loadData(),d):d}),this.getDataSourceFromContainer=override(d.getDataSourceFromContainer,function(){if(!b)return null;if("ul"==b[0].tagName.toLowerCase()){var a=[];b.find("li").each(function(){var b=$(this),c={Value:b.attr("data-value"),Name:b.text()};a.push(c)})}var c=RS.Utils.getOptionsFromAttributes(b,"data-source-options")||{};a&&(c.Data=a);var d=new RS.Controls.DataSource(c);return d}),this.getIdentifier=function(){return"List"},c||(d.initialize(),d.appendTo(b,!0))},extend(RS.Controls.List,RS.Controls.DataControl),RS.Controls.TabItem=function(a,b,c){this.Id=a,this.Name=b,this.Content=c},RS.Controls.Tab=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"tab-template"}]},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Tab.superclass.constructor.call(this,d.Options,b,!0);var e=null;this.initializeFromContainer=override(d.initializeFromContainer,function(){if(!d.Elements.Me)return d;var a=[],b=0;return d.Elements.Me.find('[role="main"]:first > [role="tabpanel"]').each(function(){var c=$(this),e=d.Elements.Me.find('[role="list"]:first > [role="tabpanel"]:eq('+b+') [role="tab"]').text(),f=new RS.Controls.TabItem(c.attr("id"),e,c.html());a.push(f),b++}),d.Options.RefreshAfterDataSourceChanged=!1,d.setDataSource(new RS.Controls.DataSource({Data:a})),d}),this.selectIndex=override(d.selectIndex,function(a){if(!d.Elements.Me)return d;var b=d.Elements.Me.find('> [role="main"] > [role="tabpanel"]:eq('+d.SelectedIndex+")");return b.hasClass("active")?d:(d.Elements.TabList.find('> [role="listitem"]').removeClass("active"),d.Elements.TabList.find('> [role="listitem"]:eq('+d.SelectedIndex+")").addClass("active"),e&&e.removeClass("active").hide(),b.addClass("active").show(),e=b,d)}),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.TabList=d.Elements.Me.find('[role="list"]:first'),d):d}),this.getIdentifier=function(){return"Tab"},c||d.initialize()},extend(RS.Controls.Tab,RS.Controls.DataControl),RS.Controls.Breadcrumb=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"breadcrumb-template",ItemTemplateId:"breadcrumb-item-template"}]},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Breadcrumb.superclass.constructor.call(this,d.Options,b,!0),this.initializeFromContainer=override(d.initializeFromContainer,function(){if(!d.Elements.Me)return d;var a=[],b=0;return d.Elements.Me.find('[role="listitem"]').each(function(){var c=$(this);a.push({Text:c.text()}),b++}),d.Options.RefreshAfterDataSourceChanged=!1,d.setDataSource(new RS.Controls.DataSource({Data:a})),d}),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?d:d}),this.getIdentifier=function(){return"Breadcrumb"},c||d.initialize()},extend(RS.Controls.Breadcrumb,RS.Controls.DataControl),RS.Controls.Panel=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"panel-template"}],HasHeader:!0,HasFooter:!1,Title:"Panel"},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Panel.superclass.constructor.call(this,d.Options,b,!0),this.initializeFromContainer=override(d.initializeFromContainer,function(){return d.Elements.Me?(d.Options.Title=d.Elements.Me.find('> [role="panel-title"]:first').html(),d.Options.HasHeader=d.Elements.Me.find('> [role="panel-header"]:first').is(":visible"),d.Options.HasFooter=d.Elements.Me.find('> [role="panel-footer"]:first').is(":visible"),d):d}),this.setTitle=function(a){return d.Options.Title=a,d.Elements.Title&&d.Elements.Title.html(a),d},this.showHeader=function(){return d.Options.HasHeader=!0,d.Elements.Header&&d.Elements.Header.show(),d},this.hideHeader=function(){return d.Options.HasHeader=!1,d.Elements.Header&&d.Elements.Header.hide(),d},this.showFooter=function(){return d.Options.HasFooter=!0,d.Elements.Footer&&d.Elements.Footer.show(),d},this.hideFooter=function(){return d.Options.HasFooter=!1,d.Elements.Footer&&d.Elements.Footer.hide(),d},this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.Header=d.Elements.Me.find('> [role="panel-header"]:first'),d.Elements.Title=d.Elements.Me.find('[role="panel-title"]:first'),d.Elements.Body=d.Elements.Me.find('> [role="panel-body"]:first'),d.Elements.Footer=d.Elements.Me.find('> [role="panel-footer"]:first'),d.setTitle(d.Options.Title),d.Options.HasHeader?d.showHeader():d.hideHeader(),d.Options.HasFooter?d.showFooter():d.hideFooter(),d):d}),this.getIdentifier=function(){return"Panel"},c||d.initialize()},extend(RS.Controls.Panel,RS.Controls.Control),RS.Controls.ProgressBar=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"progressbar-template"}],Percent:0,IsStriped:!1,IsAnimated:!1},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.ProgressBar.superclass.constructor.call(this,d.Options,b,!0),this.Elements.Percent=null,this.setPercent=function(a){return d.Options.Percent=Math.max(0,Math.min(100,a)),d.Elements.Me?(d.Elements.Percent.html(d.Options.Percent+" %").css("width",d.Options.Percent+"%"),d):d},this.setStriped=function(a){return d.Options.IsStriped=a,d.Elements.Me?(a&&!d.Elements.Percent.hasClass("progress-bar-striped")&&d.Elements.Percent.addClass("progress-bar-striped"),a||d.Elements.Percent.removeClass("progress-bar-striped"),d):d},this.setAnimated=function(a){return d.Options.IsAnimated=a,d.Elements.Me?(a&&!d.Elements.Percent.hasClass("active")&&d.Elements.Percent.addClass("active"),a||d.Elements.Percent.removeClass("active"),d):d},this.initializeFromContainer=override(d.initializeFromContainer,function(){return d.Elements.Me?(d.Options.Percent=parseInt((d.Elements.Me.Percent.html()||"").replaceAll("%","").trim(),10),isNaN(d.Options.Percent)&&(d.Options.Percent=0),d.Options.IsStriped=d.Elements.Me.Percent.hasClass("progress-bar-striped"),d.Options.IsAnimated=d.Elements.Me.Percent.hasClass("active"),d):d}),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.Percent=d.Elements.Me.find('[role="main"]:first'),d.setPercent(d.Options.Percent),d.setStriped(d.Options.IsStriped),d.setAnimated(d.Options.IsAnimated),d):d}),this.getIdentifier=function(){return"ProgressBar"},c||d.initialize()},extend(RS.Controls.ProgressBar,RS.Controls.Control),RS.Controls.PagerSizes={Small:"pagination-sm",Medium:"",Large:"pagination-lg"},RS.Controls.Pager=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"pager-template",ItemTemplateId:"pager-item-template"}],NoPages:10,MaxDisplayedPages:7,Size:RS.Controls.PagerSizes},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Pager.superclass.constructor.call(this,d.Options,b,!0),this.SelectedIndex=-1,this.Elements.Me=null,this.Elements.List=null,this.Elements.Previous=null,this.Elements.Next=null,this.initialize=override(d.initialize,function(){d.PubSub.addEvent("select")}),this.initializeFromContainer=override(d.initializeFromContainer,function(){return d.Elements.Me?(d.Options.NoPages=d.Elements.Me.find('[role="listitem"]').length,d.Options.Size=e(),d):d}),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.List=d.Elements.Me.find('[role="list"]:first'),d.Elements.List.on("click",'> [role="listitem"]',function(){var a=$(this).attr("data-index");return-2==a?a=parseInt($(this).next().attr("data-index"),10)-1:-1==a&&(a=parseInt($(this).prev().attr("data-index"),10)+1),d.selectIndex(a),!1}),d.Elements.Previous=d.Elements.Me.find('[role="previous"]:first'),d.Elements.Previous.click(function(){return d.selectIndex(d.SelectedIndex-1),!1}),d.Elements.Next=d.Elements.Me.find('[role="next"]:first'),d.Elements.Next.click(function(){return d.selectIndex(d.SelectedIndex+1),!1}),d.setSize(d.Options.Size),f(),d):d}),this.setSize=function(a){return d.Options.Size=a,d.Elements.Me?(d.Elements.List.removeClass("pagination-sm pagination-lg"),a==RS.Controls.PagerSizes.Large?d.Elements.List.addClass("pagination-lg"):a==RS.Controls.PagerSizes.Small&&d.Elements.List.addClass("pagination-sm"),d):d},this.setNoPages=function(a){return a=Math.max(0,a),a==d.Options.NoPages?d:(d.Options.NoPages=a,f(),d)},this.selectIndex=function(a){return a=Math.max(0,Math.min(d.Options.NoPages-1,a)),d.SelectedIndex==a?d:(d.SelectedIndex=a,f(),d.Elements.List.find('> [role="listitem"][data-index="'+a+'"]').addClass("active"),d.PubSub.triggerEvent("select",{Source:d,Index:a}),d)};var e=function(){return d.Elements.Me?(d.Elements.List=d.Elements.Me.find('[role="list"]:first'),d.Elements.List.hasClass("pagination-lg")?RS.Controls.PagerSizes.Large:d.Elements.List.hasClass("pagination-sm")?RS.Controls.PagerSizes.Small:RS.Controls.PagerSizes.Medium):RS.Controls.PagerSizes.Medium},f=function(){var a=Math.max(1,d.SelectedIndex-Math.floor((d.Options.MaxDisplayedPages-2)/2))+1;1==a&&b++;var b=Math.min(d.Options.NoPages,a+d.Options.MaxDisplayedPages-2)-1;b-a+1<d.Options.MaxDisplayedPages-2&&(a=Math.max(1,b-d.Options.MaxDisplayedPages+3));var c=d.getDefaultTemplate();if(c){c.ItemCompiled=c.ItemCompiled||Handlebars.compile($("#"+c.ItemTemplateId).html());for(var e="",f=!1,h=!1,i=1;i<=d.Options.NoPages;i++)(1==i||i>=a)&&(b>=i||i==d.Options.NoPages)?e+=c.ItemCompiled({Number:i,Index:i-1}):i<d.SelectedIndex&&!f?(e+=c.ItemCompiled({Number:"...",Index:-2}),f=!0):i>d.SelectedIndex&&!h&&(e+=c.ItemCompiled({Number:"...",Index:-1}),h=!0);d.Elements.List.find('[role="listitem"]').remove(),$(e).insertAfter(d.Elements.Previous),g()}},g=function(){var a=0;d.Elements.List.find('> [role="listitem"]').each(function(){a=Math.max(a,$(this).width())}),d.Elements.List.find('> [role="listitem"]').each(function(){$(this).width(a)})};this.getIdentifier=function(){return"Pager"},c||d.initialize(),d.appendTo(b,!0)},extend(RS.Controls.Pager,RS.Controls.Control),RS.Controls.Menu=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"menu-template",ItemTemplateId:"menu-item-template"}],CanHighlight:!1},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Menu.superclass.constructor.call(this,d.Options,b,!0),this.initialize=override(d.initialize,function(){var a=d.getDefaultTemplate();return a&&Handlebars.registerPartial("MenuItemTemplate",$("#"+a.ItemTemplateId).html()),d.PubSub.addEvent("select"),d}),this.initializeFromContainer=override(d.initializeFromContainer,function(){if(!b)return d;var a=e(b);return d.Options.DataSource=new RS.Controls.DataSource({Data:a}),d}),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.List=d.Elements.Me,d.Elements.List.on("click",'[role="listitem"]',function(){var a=$(this).attr("data-id"),b=f(a);return b&&d.PubSub.triggerEvent("select",{Source:d,Item:b}),!1}),d.Options.DataSource&&d.Options.DataSource.loadData(),d):d}),this.renderItems=function(a,b){if(!d.Elements.Me)return d;var c=d.getDefaultTemplate();if(!c)return null;var e=c.Compiled({Items:b});return d.Elements.Me.html(e),d};var e=function(a){if(!a)return null;var b=null;return a.find('> [role="listitem"]').each(function(){var a={Id:$(this).attr("data-id"),Name:$(this).find('> [role="main"]:first').text()||$(this).text()};a.Items=e($(this).find('> [role="list"]:first')),b||(b=[]),b.push(a)}),b},f=function(a,b){if(b=b||(d.Options.DataSource?d.Options.DataSource.Options.Data:null),!b)return null;for(var c=0;c<b.length;c++){var e=b[c];if(e.Id==a)return e;if(e.Items){var g=f(a,e.Items);if(g)return g}}return null};this.getIdentifier=function(){return"Menu"},c||d.initialize()},extend(RS.Controls.Menu,RS.Controls.DataControl),RS.Controls.Autocomplete=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"autocomplete-template",ItemTemplateId:"autocomplete-item-template"}],Search:{CanSearch:!0,MinLength:0},HighlightFirst:!0,OpenOnFocus:!0,Classes:{Main:"dropdown"}},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Autocomplete.superclass.constructor.call(this,d.Options,b,!0),this.Elements.Me=null,this.Elements.SummaryContainer=null,this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.SummaryContainer=d.Elements.Me.find('[role="summary-container"]:first'),d.Elements.Me.removeClass(d.Options.Classes.Main+" input-group"),d.Options.CanSelectMultiple?(d.Elements.Me.addClass("input-group"),d.Elements.SummaryContainer.addClass("visible")):d.Elements.Me.addClass(d.Options.Classes.Main),d.Elements.Search.focus(function(){d.Options.OpenOnFocus&&d.open()}),d.Elements.Search.dblclick(function(){d.Options.OpenOnFocus&&d.open()}),d):d}),this.search=override(d.search,function(a){return d.IsOpen||d.open(),d}),this.selectIndex=override(d.selectIndex,function(a){return d.SelectedItem?(d.Options.CanSelectMultiple?d.Elements.Search.val(""):d.Elements.Search.val(d.SelectedItem[d.Options.DisplayColumn]),d):d}),this.getSummaryElement=function(){return d.Elements.Me.find('[role="summary"]:first')},this.getIdentifier=function(){return"Autocomplete"},c||(d.initialize(),d.appendTo(b,!0))},extend(RS.Controls.Autocomplete,RS.Controls.Dropdown),RS.Controls.Combobox=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"combobox-template",ItemTemplateId:"combobox-item-template"}],Classes:{Main:"combobox"}},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Combobox.superclass.constructor.call(this,d.Options,b,!0),this.Elements.Me=null,this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.Me.addClass("input-group combobox"),d):d}),this.getIdentifier=function(){return"Combobox"},c||(d.initialize(),d.appendTo(b,!0))},extend(RS.Controls.Combobox,RS.Controls.Autocomplete),RS.Controls.TreeViewNode=function(a,b,c,d){this.Id=a,this.Name=b,this.Nodes=c,this.IsExpanded=d||!1,this.IsSelected=!1},RS.Controls.TreeView=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"treeview-template",ItemTemplateId:"treeview-item-template"}],Icons:{Expanded:"glyphicon-minus",Collapsed:"glyphicon-plus"},CanSelect:!0,CanSelectParentNodes:!0},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.TreeView.superclass.constructor.call(this,d.Options,b,!0),this.Elements.Me=null,this.initialize=override(d.initialize,function(){return Handlebars.registerPartial("TreeViewNodeChildrenTemplate",$("#treeview-item-template").html()),d}),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.List="list"==d.Elements.Me.attr("role")?d.Elements.Me:d.Elements.Me.find('[role="list"]:first'),d.Elements.List.on("click",".collapse-node",function(){var a=$(this).parents("[data-id]:first"),b=h($(this));if(b){b.IsExpanded=!1,$(this).removeClass(d.Options.Icons.Expanded).removeClass("collapse-node"),$(this).addClass(d.Options.Icons.Collapsed).addClass("expand-node"),b.IsSelected&&a.addClass("active");var c=a.find(".treeview:first");return c.hide(),!1}}),d.Elements.List.on("click",".expand-node",function(){var a=$(this).parents("[data-id]:first"),b=h($(this));if(b&&b.Nodes&&b.Nodes.length){b.IsExpanded=!0,$(this).removeClass(d.Options.Icons.Collapsed).removeClass("expand-node"),$(this).addClass(d.Options.Icons.Expanded).addClass("collapse-node"),a.removeClass("active");var c=a.find(".treeview:first");return c.show(),!1}}),d.Elements.List.on("click","li[data-id]",function(a){if(!d.Options.CanSelect)return!1;var b=$(this),c=h(b);return!c||!d.Options.CanSelectParentNodes&&c.Nodes&&c.Nodes.length?void 0:(g(c,a.Data?a.Data.IsSelected:!c.IsSelected,!0,!0),!1)}),d.Options.DataSource&&d.Options.DataSource.loadData(),d):d}),this.highlightIndex=function(a){},this.renderItems=function(a,b){var c=d.getDefaultTemplate();if(!c)return d;c.ItemCompiled=c.ItemCompiled||Handlebars.compile($("#"+c.ItemTemplateId).html());var e=c.ItemCompiled({Nodes:b});return d.Elements.List.html(e),d},this.getNodeById=function(a){if(!a)return null;if(!d.Options.DataSource||!d.Options.DataSource.Options.Data)return null;var b=i(a,d.Options.DataSource.Options.Data);return b},this.canSelect=function(){return!1},this.getSelectedItems=function(){return d.Options.DataSource&&d.Options.DataSource.Options.Data?e(d.Options.DataSource.Options.Data):null};var e=function(a){if(!a)return null;for(var b=[],c=0;c<a.length;c++)b=f(a[c],b,function(a){return 1==a.IsSelected});return b},f=function(a,b,c){if(!a)return b;if((!c||c(a))&&b.push(a),a.Nodes)for(var d=0;d<a.Nodes.length;d++)f(a.Nodes[d],b,c);return b},g=function(a,b,c,e){if(a){var f=null;if(a.IsSelected=b,e&&(f=d.Elements.List.find('li[data-id="'+a.Id+'"]'),a.IsSelected&&(!a.Nodes||a.Nodes&&!a.IsExpanded)?(f.addClass("active"),d.PubSub.triggerEvent("select",{Source:d,Item:a})):(f.removeClass("active"),d.PubSub.triggerEvent("unselect",{Source:d,Item:a}))),c&&a.Nodes)for(var h=0;h<a.Nodes.length;h++)g(a.Nodes[h],b,c,e)}},h=function(a){if(!a)return null;if(!a.hasClass("list-group-item"))return h(a.parents(".list-group-item:first"));var b=a.data("node");if(b)return b;var c=a.attr("data-id");return b=d.getNodeById(c),a.data("node",b),b},i=function(a,b){if(!a||!b)return null;for(var c=0;c<b.length;c++){var d=b[c];if(d.Id==a)return d;var e=i(a,d.Nodes);if(e)return e}return null};this.getIdentifier=function(){return"TreeView"},c||(d.initialize(),d.appendTo(b,!0))},extend(RS.Controls.TreeView,RS.Controls.DataControl),RS.Controls.Grid=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"grid-template",ItemTemplateId:"grid-item-template"}],Paging:{HasContinuousPagination:!0},CanSelect:!0,CanHighlight:!0},a&&(d.Options=$.extend(d.Options,a)),RS.Controls.Grid.superclass.constructor.call(this,d.Options,b,!0),this.Elements.Me=null,this.Elements.Header=null,this.Elements.HeaderTable=null,this.Elements.Body=null,this.Elements.BodyTable=null;var e=!1;this.initialize=override(d.initialize,function(){if(!c){var a=d.getDefaultTemplate();a&&Handlebars.registerPartial("GridItemTemplate",$("#"+a.ItemTemplateId).html())}return d}),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.Header=d.Elements.Me.find('[role="header"]:first'),d.Elements.HeaderTable=d.Elements.Header.find("table:first"),d.Elements.Body=d.Elements.Me.find('[role="body"]:first'),d.Elements.BodyTable=d.Elements.Body.find("table:first"),d.Elements.List=d.Elements.Body.find('[role="list"]:first'),d.setContinuousPaginationScrollingParent(d.Elements.Body),d.Options.DataSource&&d.Options.DataSource.loadData(),d):d}),this.renderItems=override(d.renderItems,function(){return f(),d});var f=function(){if(!e){for(var a=d.Elements.HeaderTable.find("th"),b=0;b<a.length-1;b++){var c=d.Elements.BodyTable.find("tr:first td:eq("+b+")").width();c&&(d.Elements.Me.find("colgroup:first col:eq("+b+")").attr("width",c+"px"),d.Elements.HeaderTable.find("th:eq("+b+")").css("width",c+"px"))}e=!0}};this.getIdentifier=function(){return"Grid"},c||(d.initialize(),d.appendTo(b,!0))},extend(RS.Controls.Grid,RS.Controls.DataControl),function(a){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],a);else if("object"==typeof exports)a(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";a(jQuery,moment)}}(function(a,b){"use strict";if(!b)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var c=function(c,d){var e,f,g,h,i,j,k,l={},m=!0,n=!1,o=!1,p=0,q=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],r=["days","months","years","decades"],s=["top","bottom","auto"],t=["left","right","auto"],u=["default","top","bottom"],v={
up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},w={},x=function(a){var c,e,f,g,h,i=!1;return void 0!==b.tz&&void 0!==d.timeZone&&null!==d.timeZone&&""!==d.timeZone&&(i=!0),void 0===a||null===a?c=i?b().tz(d.timeZone).startOf("d"):b().startOf("d"):i?(e=b().tz(d.timeZone).utcOffset(),f=b(a,j,d.useStrict).utcOffset(),f!==e?(g=b().tz(d.timeZone).format("Z"),h=b(a,j,d.useStrict).format("YYYY-MM-DD[T]HH:mm:ss")+g,c=b(h,j,d.useStrict).tz(d.timeZone)):c=b(a,j,d.useStrict).tz(d.timeZone)):c=b(a,j,d.useStrict),c},y=function(a){if("string"!=typeof a||a.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(a){case"y":return-1!==i.indexOf("Y");case"M":return-1!==i.indexOf("M");case"d":return-1!==i.toLowerCase().indexOf("d");case"h":case"H":return-1!==i.toLowerCase().indexOf("h");case"m":return-1!==i.indexOf("m");case"s":return-1!==i.indexOf("s");default:return!1}},z=function(){return y("h")||y("m")||y("s")},A=function(){return y("y")||y("M")||y("d")},B=function(){var b=a("<thead>").append(a("<tr>").append(a("<th>").addClass("prev").attr("data-action","previous").append(a("<span>").addClass(d.icons.previous))).append(a("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",d.calendarWeeks?"6":"5")).append(a("<th>").addClass("next").attr("data-action","next").append(a("<span>").addClass(d.icons.next)))),c=a("<tbody>").append(a("<tr>").append(a("<td>").attr("colspan",d.calendarWeeks?"8":"7")));return[a("<div>").addClass("datepicker-days").append(a("<table>").addClass("table-condensed").append(b).append(a("<tbody>"))),a("<div>").addClass("datepicker-months").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-years").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-decades").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone()))]},C=function(){var b=a("<tr>"),c=a("<tr>"),e=a("<tr>");return y("h")&&(b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:d.tooltips.pickHour}).attr("data-action","showHours"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(a("<span>").addClass(d.icons.down))))),y("m")&&(y("h")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:d.tooltips.pickMinute}).attr("data-action","showMinutes"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(a("<span>").addClass(d.icons.down))))),y("s")&&(y("m")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:d.tooltips.pickSecond}).attr("data-action","showSeconds"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(a("<span>").addClass(d.icons.down))))),h||(b.append(a("<td>").addClass("separator")),c.append(a("<td>").append(a("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:d.tooltips.togglePeriod}))),e.append(a("<td>").addClass("separator"))),a("<div>").addClass("timepicker-picker").append(a("<table>").addClass("table-condensed").append([b,c,e]))},D=function(){var b=a("<div>").addClass("timepicker-hours").append(a("<table>").addClass("table-condensed")),c=a("<div>").addClass("timepicker-minutes").append(a("<table>").addClass("table-condensed")),d=a("<div>").addClass("timepicker-seconds").append(a("<table>").addClass("table-condensed")),e=[C()];return y("h")&&e.push(b),y("m")&&e.push(c),y("s")&&e.push(d),e},E=function(){var b=[];return d.showTodayButton&&b.push(a("<td>").append(a("<a>").attr({"data-action":"today",title:d.tooltips.today}).append(a("<span>").addClass(d.icons.today)))),!d.sideBySide&&A()&&z()&&b.push(a("<td>").append(a("<a>").attr({"data-action":"togglePicker",title:d.tooltips.selectTime}).append(a("<span>").addClass(d.icons.time)))),d.showClear&&b.push(a("<td>").append(a("<a>").attr({"data-action":"clear",title:d.tooltips.clear}).append(a("<span>").addClass(d.icons.clear)))),d.showClose&&b.push(a("<td>").append(a("<a>").attr({"data-action":"close",title:d.tooltips.close}).append(a("<span>").addClass(d.icons.close)))),a("<table>").addClass("table-condensed").append(a("<tbody>").append(a("<tr>").append(b)))},F=function(){var b=a("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),c=a("<div>").addClass("datepicker").append(B()),e=a("<div>").addClass("timepicker").append(D()),f=a("<ul>").addClass("list-unstyled"),g=a("<li>").addClass("picker-switch"+(d.collapse?" accordion-toggle":"")).append(E());return d.inline&&b.removeClass("dropdown-menu"),h&&b.addClass("usetwentyfour"),y("s")&&!h&&b.addClass("wider"),d.sideBySide&&A()&&z()?(b.addClass("timepicker-sbs"),"top"===d.toolbarPlacement&&b.append(g),b.append(a("<div>").addClass("row").append(c.addClass("col-md-6")).append(e.addClass("col-md-6"))),"bottom"===d.toolbarPlacement&&b.append(g),b):("top"===d.toolbarPlacement&&f.append(g),A()&&f.append(a("<li>").addClass(d.collapse&&z()?"collapse in":"").append(c)),"default"===d.toolbarPlacement&&f.append(g),z()&&f.append(a("<li>").addClass(d.collapse&&A()?"collapse":"").append(e)),"bottom"===d.toolbarPlacement&&f.append(g),b.append(f))},G=function(){var b,e={};return b=c.is("input")||d.inline?c.data():c.find("input").data(),b.dateOptions&&b.dateOptions instanceof Object&&(e=a.extend(!0,e,b.dateOptions)),a.each(d,function(a){var c="date"+a.charAt(0).toUpperCase()+a.slice(1);void 0!==b[c]&&(e[a]=b[c])}),e},H=function(){var b,e=(n||c).position(),f=(n||c).offset(),g=d.widgetPositioning.vertical,h=d.widgetPositioning.horizontal;if(d.widgetParent)b=d.widgetParent.append(o);else if(c.is("input"))b=c.after(o).parent();else{if(d.inline)return void(b=c.append(o));b=c,c.children().first().after(o)}if("auto"===g&&(g=f.top+1.5*o.height()>=a(window).height()+a(window).scrollTop()&&o.height()+c.outerHeight()<f.top?"top":"bottom"),"auto"===h&&(h=b.width()<f.left+o.outerWidth()/2&&f.left+o.outerWidth()>a(window).width()?"right":"left"),"top"===g?o.addClass("top").removeClass("bottom"):o.addClass("bottom").removeClass("top"),"right"===h?o.addClass("pull-right"):o.removeClass("pull-right"),"relative"!==b.css("position")&&(b=b.parents().filter(function(){return"relative"===a(this).css("position")}).first()),0===b.length)throw new Error("datetimepicker component should be placed within a relative positioned container");o.css({top:"top"===g?"auto":e.top+c.outerHeight(),bottom:"top"===g?e.top+c.outerHeight():"auto",left:"left"===h?b===c?0:e.left:"auto",right:"left"===h?"auto":b.outerWidth()-c.outerWidth()-(b===c?0:e.left)})},I=function(a){"dp.change"===a.type&&(a.date&&a.date.isSame(a.oldDate)||!a.date&&!a.oldDate)||c.trigger(a)},J=function(a){"y"===a&&(a="YYYY"),I({type:"dp.update",change:a,viewDate:f.clone()})},K=function(a){o&&(a&&(k=Math.max(p,Math.min(3,k+a))),o.find(".datepicker > div").hide().filter(".datepicker-"+q[k].clsName).show())},L=function(){var b=a("<tr>"),c=f.clone().startOf("w").startOf("d");for(d.calendarWeeks===!0&&b.append(a("<th>").addClass("cw").text("#"));c.isBefore(f.clone().endOf("w"));)b.append(a("<th>").addClass("dow").text(c.format("dd"))),c.add(1,"d");o.find(".datepicker-days thead").append(b)},M=function(a){return d.disabledDates[a.format("YYYY-MM-DD")]===!0},N=function(a){return d.enabledDates[a.format("YYYY-MM-DD")]===!0},O=function(a){return d.disabledHours[a.format("H")]===!0},P=function(a){return d.enabledHours[a.format("H")]===!0},Q=function(b,c){if(!b.isValid())return!1;if(d.disabledDates&&"d"===c&&M(b))return!1;if(d.enabledDates&&"d"===c&&!N(b))return!1;if(d.minDate&&b.isBefore(d.minDate,c))return!1;if(d.maxDate&&b.isAfter(d.maxDate,c))return!1;if(d.daysOfWeekDisabled&&"d"===c&&-1!==d.daysOfWeekDisabled.indexOf(b.day()))return!1;if(d.disabledHours&&("h"===c||"m"===c||"s"===c)&&O(b))return!1;if(d.enabledHours&&("h"===c||"m"===c||"s"===c)&&!P(b))return!1;if(d.disabledTimeIntervals&&("h"===c||"m"===c||"s"===c)){var e=!1;if(a.each(d.disabledTimeIntervals,function(){return b.isBetween(this[0],this[1])?(e=!0,!1):void 0}),e)return!1}return!0},R=function(){for(var b=[],c=f.clone().startOf("y").startOf("d");c.isSame(f,"y");)b.push(a("<span>").attr("data-action","selectMonth").addClass("month").text(c.format("MMM"))),c.add(1,"M");o.find(".datepicker-months td").empty().append(b)},S=function(){var b=o.find(".datepicker-months"),c=b.find("th"),g=b.find("tbody").find("span");c.eq(0).find("span").attr("title",d.tooltips.prevYear),c.eq(1).attr("title",d.tooltips.selectYear),c.eq(2).find("span").attr("title",d.tooltips.nextYear),b.find(".disabled").removeClass("disabled"),Q(f.clone().subtract(1,"y"),"y")||c.eq(0).addClass("disabled"),c.eq(1).text(f.year()),Q(f.clone().add(1,"y"),"y")||c.eq(2).addClass("disabled"),g.removeClass("active"),e.isSame(f,"y")&&!m&&g.eq(e.month()).addClass("active"),g.each(function(b){Q(f.clone().month(b),"M")||a(this).addClass("disabled")})},T=function(){var a=o.find(".datepicker-years"),b=a.find("th"),c=f.clone().subtract(5,"y"),g=f.clone().add(6,"y"),h="";for(b.eq(0).find("span").attr("title",d.tooltips.prevDecade),b.eq(1).attr("title",d.tooltips.selectDecade),b.eq(2).find("span").attr("title",d.tooltips.nextDecade),a.find(".disabled").removeClass("disabled"),d.minDate&&d.minDate.isAfter(c,"y")&&b.eq(0).addClass("disabled"),b.eq(1).text(c.year()+"-"+g.year()),d.maxDate&&d.maxDate.isBefore(g,"y")&&b.eq(2).addClass("disabled");!c.isAfter(g,"y");)h+='<span data-action="selectYear" class="year'+(c.isSame(e,"y")&&!m?" active":"")+(Q(c,"y")?"":" disabled")+'">'+c.year()+"</span>",c.add(1,"y");a.find("td").html(h)},U=function(){var a=o.find(".datepicker-decades"),c=a.find("th"),g=b({y:f.year()-f.year()%100-1}),h=g.clone().add(100,"y"),i=g.clone(),j="";for(c.eq(0).find("span").attr("title",d.tooltips.prevCentury),c.eq(2).find("span").attr("title",d.tooltips.nextCentury),a.find(".disabled").removeClass("disabled"),(g.isSame(b({y:1900}))||d.minDate&&d.minDate.isAfter(g,"y"))&&c.eq(0).addClass("disabled"),c.eq(1).text(g.year()+"-"+h.year()),(g.isSame(b({y:2e3}))||d.maxDate&&d.maxDate.isBefore(h,"y"))&&c.eq(2).addClass("disabled");!g.isAfter(h,"y");)j+='<span data-action="selectDecade" class="decade'+(g.isSame(e,"y")?" active":"")+(Q(g,"y")?"":" disabled")+'" data-selection="'+(g.year()+6)+'">'+(g.year()+1)+" - "+(g.year()+12)+"</span>",g.add(12,"y");j+="<span></span><span></span><span></span>",a.find("td").html(j),c.eq(1).text(i.year()+1+"-"+g.year())},V=function(){var b,c,g,h,i=o.find(".datepicker-days"),j=i.find("th"),k=[];if(A()){for(j.eq(0).find("span").attr("title",d.tooltips.prevMonth),j.eq(1).attr("title",d.tooltips.selectMonth),j.eq(2).find("span").attr("title",d.tooltips.nextMonth),i.find(".disabled").removeClass("disabled"),j.eq(1).text(f.format(d.dayViewHeaderFormat)),Q(f.clone().subtract(1,"M"),"M")||j.eq(0).addClass("disabled"),Q(f.clone().add(1,"M"),"M")||j.eq(2).addClass("disabled"),b=f.clone().startOf("M").startOf("w").startOf("d"),h=0;42>h;h++)0===b.weekday()&&(c=a("<tr>"),d.calendarWeeks&&c.append('<td class="cw">'+b.week()+"</td>"),k.push(c)),g="",b.isBefore(f,"M")&&(g+=" old"),b.isAfter(f,"M")&&(g+=" new"),b.isSame(e,"d")&&!m&&(g+=" active"),Q(b,"d")||(g+=" disabled"),b.isSame(x(),"d")&&(g+=" today"),(0===b.day()||6===b.day())&&(g+=" weekend"),c.append('<td data-action="selectDay" data-day="'+b.format("L")+'" class="day'+g+'">'+b.date()+"</td>"),b.add(1,"d");i.find("tbody").empty().append(k),S(),T(),U()}},W=function(){var b=o.find(".timepicker-hours table"),c=f.clone().startOf("d"),d=[],e=a("<tr>");for(f.hour()>11&&!h&&c.hour(12);c.isSame(f,"d")&&(h||f.hour()<12&&c.hour()<12||f.hour()>11);)c.hour()%4===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectHour" class="hour'+(Q(c,"h")?"":" disabled")+'">'+c.format(h?"HH":"hh")+"</td>"),c.add(1,"h");b.empty().append(d)},X=function(){for(var b=o.find(".timepicker-minutes table"),c=f.clone().startOf("h"),e=[],g=a("<tr>"),h=1===d.stepping?5:d.stepping;f.isSame(c,"h");)c.minute()%(4*h)===0&&(g=a("<tr>"),e.push(g)),g.append('<td data-action="selectMinute" class="minute'+(Q(c,"m")?"":" disabled")+'">'+c.format("mm")+"</td>"),c.add(h,"m");b.empty().append(e)},Y=function(){for(var b=o.find(".timepicker-seconds table"),c=f.clone().startOf("m"),d=[],e=a("<tr>");f.isSame(c,"m");)c.second()%20===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectSecond" class="second'+(Q(c,"s")?"":" disabled")+'">'+c.format("ss")+"</td>"),c.add(5,"s");b.empty().append(d)},Z=function(){var a,b,c=o.find(".timepicker span[data-time-component]");h||(a=o.find(".timepicker [data-action=togglePeriod]"),b=e.clone().add(e.hours()>=12?-12:12,"h"),a.text(e.format("A")),Q(b,"h")?a.removeClass("disabled"):a.addClass("disabled")),c.filter("[data-time-component=hours]").text(e.format(h?"HH":"hh")),c.filter("[data-time-component=minutes]").text(e.format("mm")),c.filter("[data-time-component=seconds]").text(e.format("ss")),W(),X(),Y()},$=function(){o&&(V(),Z())},_=function(a){var b=m?null:e;return a?(a=a.clone().locale(d.locale),1!==d.stepping&&a.minutes(Math.round(a.minutes()/d.stepping)*d.stepping%60).seconds(0),void(Q(a)?(e=a,f=e.clone(),g.val(e.format(i)),c.data("date",e.format(i)),m=!1,$(),I({type:"dp.change",date:e.clone(),oldDate:b})):(d.keepInvalid||g.val(m?"":e.format(i)),I({type:"dp.error",date:a})))):(m=!0,g.val(""),c.data("date",""),I({type:"dp.change",date:!1,oldDate:b}),void $())},aa=function(){var b=!1;return o?(o.find(".collapse").each(function(){var c=a(this).data("collapse");return c&&c.transitioning?(b=!0,!1):!0}),b?l:(n&&n.hasClass("btn")&&n.toggleClass("active"),o.hide(),a(window).off("resize",H),o.off("click","[data-action]"),o.off("mousedown",!1),o.remove(),o=!1,I({type:"dp.hide",date:e.clone()}),g.blur(),l)):l},ba=function(){_(null)},ca={next:function(){var a=q[k].navFnc;f.add(q[k].navStep,a),V(),J(a)},previous:function(){var a=q[k].navFnc;f.subtract(q[k].navStep,a),V(),J(a)},pickerSwitch:function(){K(1)},selectMonth:function(b){var c=a(b.target).closest("tbody").find("span").index(a(b.target));f.month(c),k===p?(_(e.clone().year(f.year()).month(f.month())),d.inline||aa()):(K(-1),V()),J("M")},selectYear:function(b){var c=parseInt(a(b.target).text(),10)||0;f.year(c),k===p?(_(e.clone().year(f.year())),d.inline||aa()):(K(-1),V()),J("YYYY")},selectDecade:function(b){var c=parseInt(a(b.target).data("selection"),10)||0;f.year(c),k===p?(_(e.clone().year(f.year())),d.inline||aa()):(K(-1),V()),J("YYYY")},selectDay:function(b){var c=f.clone();a(b.target).is(".old")&&c.subtract(1,"M"),a(b.target).is(".new")&&c.add(1,"M"),_(c.date(parseInt(a(b.target).text(),10))),z()||d.keepOpen||d.inline||aa()},incrementHours:function(){var a=e.clone().add(1,"h");Q(a,"h")&&_(a)},incrementMinutes:function(){var a=e.clone().add(d.stepping,"m");Q(a,"m")&&_(a)},incrementSeconds:function(){var a=e.clone().add(1,"s");Q(a,"s")&&_(a)},decrementHours:function(){var a=e.clone().subtract(1,"h");Q(a,"h")&&_(a)},decrementMinutes:function(){var a=e.clone().subtract(d.stepping,"m");Q(a,"m")&&_(a)},decrementSeconds:function(){var a=e.clone().subtract(1,"s");Q(a,"s")&&_(a)},togglePeriod:function(){_(e.clone().add(e.hours()>=12?-12:12,"h"))},togglePicker:function(b){var c,e=a(b.target),f=e.closest("ul"),g=f.find(".in"),h=f.find(".collapse:not(.in)");if(g&&g.length){if(c=g.data("collapse"),c&&c.transitioning)return;g.collapse?(g.collapse("hide"),h.collapse("show")):(g.removeClass("in"),h.addClass("in")),e.is("span")?e.toggleClass(d.icons.time+" "+d.icons.date):e.find("span").toggleClass(d.icons.time+" "+d.icons.date)}},showPicker:function(){o.find(".timepicker > div:not(.timepicker-picker)").hide(),o.find(".timepicker .timepicker-picker").show()},showHours:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-hours").show()},showMinutes:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=parseInt(a(b.target).text(),10);h||(e.hours()>=12?12!==c&&(c+=12):12===c&&(c=0)),_(e.clone().hours(c)),ca.showPicker.call(l)},selectMinute:function(b){_(e.clone().minutes(parseInt(a(b.target).text(),10))),ca.showPicker.call(l)},selectSecond:function(b){_(e.clone().seconds(parseInt(a(b.target).text(),10))),ca.showPicker.call(l)},clear:ba,today:function(){var a=x();Q(a,"d")&&_(a)},close:aa},da=function(b){return a(b.currentTarget).is(".disabled")?!1:(ca[a(b.currentTarget).data("action")].apply(l,arguments),!1)},ea=function(){var b,c={year:function(a){return a.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(a){return a.date(1).hours(0).seconds(0).minutes(0)},day:function(a){return a.hours(0).seconds(0).minutes(0)},hour:function(a){return a.seconds(0).minutes(0)},minute:function(a){return a.seconds(0)}};return g.prop("disabled")||!d.ignoreReadonly&&g.prop("readonly")||o?l:(void 0!==g.val()&&0!==g.val().trim().length?_(ga(g.val().trim())):d.useCurrent&&m&&(g.is("input")&&0===g.val().trim().length||d.inline)&&(b=x(),"string"==typeof d.useCurrent&&(b=c[d.useCurrent](b)),_(b)),o=F(),L(),R(),o.find(".timepicker-hours").hide(),o.find(".timepicker-minutes").hide(),o.find(".timepicker-seconds").hide(),$(),K(),a(window).on("resize",H),o.on("click","[data-action]",da),o.on("mousedown",!1),n&&n.hasClass("btn")&&n.toggleClass("active"),o.show(),H(),d.focusOnShow&&!g.is(":focus")&&g.focus(),I({type:"dp.show"}),l)},fa=function(){return o?aa():ea()},ga=function(a){return a=void 0===d.parseInputDate?b.isMoment(a)||a instanceof Date?b(a):x(a):d.parseInputDate(a),a.locale(d.locale),a},ha=function(a){var b,c,e,f,g=null,h=[],i={},j=a.which,k="p";w[j]=k;for(b in w)w.hasOwnProperty(b)&&w[b]===k&&(h.push(b),parseInt(b,10)!==j&&(i[b]=!0));for(b in d.keyBinds)if(d.keyBinds.hasOwnProperty(b)&&"function"==typeof d.keyBinds[b]&&(e=b.split(" "),e.length===h.length&&v[j]===e[e.length-1])){for(f=!0,c=e.length-2;c>=0;c--)if(!(v[e[c]]in i)){f=!1;break}if(f){g=d.keyBinds[b];break}}g&&(g.call(l,o),a.stopPropagation(),a.preventDefault())},ia=function(a){w[a.which]="r",a.stopPropagation(),a.preventDefault()},ja=function(b){var c=a(b.target).val().trim(),d=c?ga(c):null;return _(d),b.stopImmediatePropagation(),!1},ka=function(){g.on({change:ja,blur:d.debug?"":aa,keydown:ha,keyup:ia,focus:d.allowInputToggle?ea:""}),c.is("input")?g.on({focus:ea}):n&&(n.on("click",fa),n.on("mousedown",!1))},la=function(){g.off({change:ja,blur:blur,keydown:ha,keyup:ia,focus:d.allowInputToggle?aa:""}),c.is("input")?g.off({focus:ea}):n&&(n.off("click",fa),n.off("mousedown",!1))},ma=function(b){var c={};return a.each(b,function(){var a=ga(this);a.isValid()&&(c[a.format("YYYY-MM-DD")]=!0)}),Object.keys(c).length?c:!1},na=function(b){var c={};return a.each(b,function(){c[this]=!0}),Object.keys(c).length?c:!1},oa=function(){var a=d.format||"L LT";i=a.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){var b=e.localeData().longDateFormat(a)||a;return b.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){return e.localeData().longDateFormat(a)||a})}),j=d.extraFormats?d.extraFormats.slice():[],j.indexOf(a)<0&&j.indexOf(i)<0&&j.push(i),h=i.toLowerCase().indexOf("a")<1&&i.replace(/\[.*?\]/g,"").indexOf("h")<1,y("y")&&(p=2),y("M")&&(p=1),y("d")&&(p=0),k=Math.max(p,k),m||_(e)};if(l.destroy=function(){aa(),la(),c.removeData("DateTimePicker"),c.removeData("date")},l.toggle=fa,l.show=ea,l.hide=aa,l.disable=function(){return aa(),n&&n.hasClass("btn")&&n.addClass("disabled"),g.prop("disabled",!0),l},l.enable=function(){return n&&n.hasClass("btn")&&n.removeClass("disabled"),g.prop("disabled",!1),l},l.ignoreReadonly=function(a){if(0===arguments.length)return d.ignoreReadonly;if("boolean"!=typeof a)throw new TypeError("ignoreReadonly () expects a boolean parameter");return d.ignoreReadonly=a,l},l.options=function(b){if(0===arguments.length)return a.extend(!0,{},d);if(!(b instanceof Object))throw new TypeError("options() options parameter should be an object");return a.extend(!0,d,b),a.each(d,function(a,b){if(void 0===l[a])throw new TypeError("option "+a+" is not recognized!");l[a](b)}),l},l.date=function(a){if(0===arguments.length)return m?null:e.clone();if(!(null===a||"string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return _(null===a?null:ga(a)),l},l.format=function(a){if(0===arguments.length)return d.format;if("string"!=typeof a&&("boolean"!=typeof a||a!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+a);return d.format=a,i&&oa(),l},l.timeZone=function(a){return 0===arguments.length?d.timeZone:(d.timeZone=a,l)},l.dayViewHeaderFormat=function(a){if(0===arguments.length)return d.dayViewHeaderFormat;if("string"!=typeof a)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return d.dayViewHeaderFormat=a,l},l.extraFormats=function(a){if(0===arguments.length)return d.extraFormats;if(a!==!1&&!(a instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return d.extraFormats=a,j&&oa(),l},l.disabledDates=function(b){if(0===arguments.length)return d.disabledDates?a.extend({},d.disabledDates):d.disabledDates;if(!b)return d.disabledDates=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return d.disabledDates=ma(b),d.enabledDates=!1,$(),l},l.enabledDates=function(b){if(0===arguments.length)return d.enabledDates?a.extend({},d.enabledDates):d.enabledDates;if(!b)return d.enabledDates=!1,$(),l;if(!(b instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return d.enabledDates=ma(b),d.disabledDates=!1,$(),l},l.daysOfWeekDisabled=function(a){if(0===arguments.length)return d.daysOfWeekDisabled.splice(0);if("boolean"==typeof a&&!a)return d.daysOfWeekDisabled=!1,$(),l;if(!(a instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(d.daysOfWeekDisabled=a.reduce(function(a,b){return b=parseInt(b,10),b>6||0>b||isNaN(b)?a:(-1===a.indexOf(b)&&a.push(b),a)},[]).sort(),d.useCurrent&&!d.keepInvalid){for(var b=0;!Q(e,"d");){if(e.add(1,"d"),7===b)throw"Tried 7 times to find a valid date";b++}_(e)}return $(),l},l.maxDate=function(a){if(0===arguments.length)return d.maxDate?d.maxDate.clone():d.maxDate;if("boolean"==typeof a&&a===!1)return d.maxDate=!1,$(),l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+a);if(d.minDate&&b.isBefore(d.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+b.format(i));return d.maxDate=b,d.useCurrent&&!d.keepInvalid&&e.isAfter(a)&&_(d.maxDate),f.isAfter(b)&&(f=b.clone().subtract(d.stepping,"m")),$(),l},l.minDate=function(a){if(0===arguments.length)return d.minDate?d.minDate.clone():d.minDate;if("boolean"==typeof a&&a===!1)return d.minDate=!1,$(),l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("minDate() Could not parse date parameter: "+a);if(d.maxDate&&b.isAfter(d.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+b.format(i));return d.minDate=b,d.useCurrent&&!d.keepInvalid&&e.isBefore(a)&&_(d.minDate),f.isBefore(b)&&(f=b.clone().add(d.stepping,"m")),$(),l},l.defaultDate=function(a){if(0===arguments.length)return d.defaultDate?d.defaultDate.clone():d.defaultDate;if(!a)return d.defaultDate=!1,l;"string"==typeof a&&("now"===a||"moment"===a)&&(a=x());var b=ga(a);if(!b.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+a);if(!Q(b))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return d.defaultDate=b,(d.defaultDate&&d.inline||""===g.val().trim())&&_(d.defaultDate),l},l.locale=function(a){if(0===arguments.length)return d.locale;if(!b.localeData(a))throw new TypeError("locale() locale "+a+" is not loaded from moment locales!");return d.locale=a,e.locale(d.locale),f.locale(d.locale),i&&oa(),o&&(aa(),ea()),l},l.stepping=function(a){return 0===arguments.length?d.stepping:(a=parseInt(a,10),(isNaN(a)||1>a)&&(a=1),d.stepping=a,l)},l.useCurrent=function(a){var b=["year","month","day","hour","minute"];if(0===arguments.length)return d.useCurrent;if("boolean"!=typeof a&&"string"!=typeof a)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof a&&-1===b.indexOf(a.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+b.join(", "));return d.useCurrent=a,l},l.collapse=function(a){if(0===arguments.length)return d.collapse;if("boolean"!=typeof a)throw new TypeError("collapse() expects a boolean parameter");return d.collapse===a?l:(d.collapse=a,o&&(aa(),ea()),l)},l.icons=function(b){if(0===arguments.length)return a.extend({},d.icons);if(!(b instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return a.extend(d.icons,b),o&&(aa(),ea()),l},l.tooltips=function(b){if(0===arguments.length)return a.extend({},d.tooltips);if(!(b instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return a.extend(d.tooltips,b),o&&(aa(),ea()),l},l.useStrict=function(a){if(0===arguments.length)return d.useStrict;if("boolean"!=typeof a)throw new TypeError("useStrict() expects a boolean parameter");return d.useStrict=a,l},l.sideBySide=function(a){if(0===arguments.length)return d.sideBySide;if("boolean"!=typeof a)throw new TypeError("sideBySide() expects a boolean parameter");return d.sideBySide=a,o&&(aa(),ea()),l},l.viewMode=function(a){if(0===arguments.length)return d.viewMode;if("string"!=typeof a)throw new TypeError("viewMode() expects a string parameter");if(-1===r.indexOf(a))throw new TypeError("viewMode() parameter must be one of ("+r.join(", ")+") value");return d.viewMode=a,k=Math.max(r.indexOf(a),p),K(),l},l.toolbarPlacement=function(a){if(0===arguments.length)return d.toolbarPlacement;if("string"!=typeof a)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===u.indexOf(a))throw new TypeError("toolbarPlacement() parameter must be one of ("+u.join(", ")+") value");return d.toolbarPlacement=a,o&&(aa(),ea()),l},l.widgetPositioning=function(b){if(0===arguments.length)return a.extend({},d.widgetPositioning);if("[object Object]"!=={}.toString.call(b))throw new TypeError("widgetPositioning() expects an object variable");if(b.horizontal){if("string"!=typeof b.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(b.horizontal=b.horizontal.toLowerCase(),-1===t.indexOf(b.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+t.join(", ")+")");d.widgetPositioning.horizontal=b.horizontal}if(b.vertical){if("string"!=typeof b.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(b.vertical=b.vertical.toLowerCase(),-1===s.indexOf(b.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+s.join(", ")+")");d.widgetPositioning.vertical=b.vertical}return $(),l},l.calendarWeeks=function(a){if(0===arguments.length)return d.calendarWeeks;if("boolean"!=typeof a)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return d.calendarWeeks=a,$(),l},l.showTodayButton=function(a){if(0===arguments.length)return d.showTodayButton;if("boolean"!=typeof a)throw new TypeError("showTodayButton() expects a boolean parameter");return d.showTodayButton=a,o&&(aa(),ea()),l},l.showClear=function(a){if(0===arguments.length)return d.showClear;if("boolean"!=typeof a)throw new TypeError("showClear() expects a boolean parameter");return d.showClear=a,o&&(aa(),ea()),l},l.widgetParent=function(b){if(0===arguments.length)return d.widgetParent;if("string"==typeof b&&(b=a(b)),null!==b&&"string"!=typeof b&&!(b instanceof a))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return d.widgetParent=b,o&&(aa(),ea()),l},l.keepOpen=function(a){if(0===arguments.length)return d.keepOpen;if("boolean"!=typeof a)throw new TypeError("keepOpen() expects a boolean parameter");return d.keepOpen=a,l},l.focusOnShow=function(a){if(0===arguments.length)return d.focusOnShow;if("boolean"!=typeof a)throw new TypeError("focusOnShow() expects a boolean parameter");return d.focusOnShow=a,l},l.inline=function(a){if(0===arguments.length)return d.inline;if("boolean"!=typeof a)throw new TypeError("inline() expects a boolean parameter");return d.inline=a,l},l.clear=function(){return ba(),l},l.keyBinds=function(a){return d.keyBinds=a,l},l.getMoment=function(a){return x(a)},l.debug=function(a){if("boolean"!=typeof a)throw new TypeError("debug() expects a boolean parameter");return d.debug=a,l},l.allowInputToggle=function(a){if(0===arguments.length)return d.allowInputToggle;if("boolean"!=typeof a)throw new TypeError("allowInputToggle() expects a boolean parameter");return d.allowInputToggle=a,l},l.showClose=function(a){if(0===arguments.length)return d.showClose;if("boolean"!=typeof a)throw new TypeError("showClose() expects a boolean parameter");return d.showClose=a,l},l.keepInvalid=function(a){if(0===arguments.length)return d.keepInvalid;if("boolean"!=typeof a)throw new TypeError("keepInvalid() expects a boolean parameter");return d.keepInvalid=a,l},l.datepickerInput=function(a){if(0===arguments.length)return d.datepickerInput;if("string"!=typeof a)throw new TypeError("datepickerInput() expects a string parameter");return d.datepickerInput=a,l},l.parseInputDate=function(a){if(0===arguments.length)return d.parseInputDate;if("function"!=typeof a)throw new TypeError("parseInputDate() sholud be as function");return d.parseInputDate=a,l},l.disabledTimeIntervals=function(b){if(0===arguments.length)return d.disabledTimeIntervals?a.extend({},d.disabledTimeIntervals):d.disabledTimeIntervals;if(!b)return d.disabledTimeIntervals=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return d.disabledTimeIntervals=b,$(),l},l.disabledHours=function(b){if(0===arguments.length)return d.disabledHours?a.extend({},d.disabledHours):d.disabledHours;if(!b)return d.disabledHours=!1,$(),l;if(!(b instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(d.disabledHours=na(b),d.enabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!Q(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";
c++}_(e)}return $(),l},l.enabledHours=function(b){if(0===arguments.length)return d.enabledHours?a.extend({},d.enabledHours):d.enabledHours;if(!b)return d.enabledHours=!1,$(),l;if(!(b instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(d.enabledHours=na(b),d.disabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!Q(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}_(e)}return $(),l},l.viewDate=function(a){if(0===arguments.length)return f.clone();if(!a)return f=e.clone(),l;if(!("string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return f=ga(a),J(),l},c.is("input"))g=c;else if(g=c.find(d.datepickerInput),0===g.size())g=c.find("input");else if(!g.is("input"))throw new Error('CSS class "'+d.datepickerInput+'" cannot be applied to non input element');if(c.hasClass("input-group")&&(n=0===c.find(".datepickerbutton").size()?c.find(".input-group-addon"):c.find(".datepickerbutton")),!d.inline&&!g.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return e=x(),f=e.clone(),a.extend(!0,d,G()),l.options(d),oa(),ka(),g.prop("disabled")&&l.disable(),g.is("input")&&0!==g.val().trim().length?_(ga(g.val().trim())):d.defaultDate&&void 0===g.attr("placeholder")&&_(d.defaultDate),d.inline&&ea(),l};a.fn.datetimepicker=function(b){return this.each(function(){var d=a(this);d.data("DateTimePicker")||(b=a.extend(!0,{},a.fn.datetimepicker.defaults,b),d.data("DateTimePicker",c(d,b)))})},a.fn.datetimepicker.defaults={timeZone:"Etc/UTC",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:b.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(7,"d")):this.date(b.clone().add(this.stepping(),"m"))}},down:function(a){if(!a)return void this.show();var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(7,"d")):this.date(b.clone().subtract(this.stepping(),"m"))},"control up":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(1,"y")):this.date(b.clone().add(1,"h"))}},"control down":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(1,"y")):this.date(b.clone().subtract(1,"h"))}},left:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"d"))}},right:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"d"))}},pageUp:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"M"))}},pageDown:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(a){a.find(".timepicker").is(":visible")&&a.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},"delete":function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}}),RS.Controls.DateTimePicker=function(a,b,c){var d=this;this.Options={Templates:[{IsDefault:!0,Id:"datetimepicker-template"}],Hours:{Enabled:!1}},a&&(d.Options=$.extend(d.Options,a));var e={format:d.Options.Hours.Enabled?"DD/MM/YYYY hh:mm":"DD/MM/YYYY"};RS.Controls.DateTimePicker.superclass.constructor.call(this,d.Options,b,!0),this.Elements.Me=null,this.Elements.Picker=null,this.SelectedDate=null;var f=null;this.initialize=override(d.initialize,function(){return d.PubSub.addEvent("select"),d}),this.setDate=function(a){d.SelectedDate=a,f.date(d.SelectedDate)},this.disable=override(d.disable,function(){return f?(f.disable(),d):d}),this.enable=override(d.enable,function(){return f?(f.enable(),d):d}),this.initializeHtml=override(d.initializeHtml,function(){return d.Elements.Me?(d.Elements.Picker="datetimepicker"==d.Elements.Me.attr("role")?d.Elements.Me:d.Elements.Me.find('[role="datetimepicker"]:first'),d.Elements.Picker.datetimepicker(e),d.Elements.Picker.on("dp.change",function(a){d.SelectedDate=a.date?a.date.toDate():null,d.PubSub.triggerEvent("select",{Source:d,Data:d.SelectedDate})}),f=d.Elements.Picker.data("DateTimePicker"),d.Elements.Picker.find("input:first").bind("focusin",function(){f.show()}),f.date(d.SelectedDate),d.Options.IsEnabled?d.enable():d.disable(),d):d}),this.getIdentifier=function(){return"DateTimePicker"},c||(d.initialize(),d.appendTo(b,!0))},extend(RS.Controls.DateTimePicker,RS.Controls.Control),RS.Controls.ControlsGenerator=function(){var a=[],b=function(a){a=a||$(document),a.on("DOMNodeInserted",function(a){var b=$(a.target);e(b)})},c=function(b){if(!b)return null;b=b.toLowerCase();for(var c=0;c<a.length;c++){var d=a[c];if(d.Name.toLowerCase()==b)return d}return null},d=function(b,d){var e=c(b);null!=e?e=d:a.push(d)},e=function(a){a=a||$(document),f(a),a.find("[data-control]").each(function(){f($(this))})},f=function(a){if(a&&!a.data("generator-initialized")){a.data("generator-initialized",!0);var b=a.attr("data-control")||"";if(b){var d=c(b);d&&(d.build(a),RS.Event.sendEvent(a,"control-initialized"))}}};return{listenForControls:function(a){b(a)},generateControl:function(a){f(a)},generateControlsInContainer:function(a){e(a)},registerBuilder:function(a,b){d(a,b)}}}(),RS.Controls.ControlsGenerator.registerBuilder("Container",{Name:"Container",build:function(a){new RS.Controls.Container(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Button",{Name:"Button",build:function(a){new RS.Controls.Button(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("ToggleButton",{Name:"ToggleButton",build:function(a){new RS.Controls.ToggleButton(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("ButtonGroup",{Name:"ButtonGroup",build:function(a){new RS.Controls.ButtonGroup(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Modal",{Name:"Modal",build:function(a){new RS.Controls.ButtonGroup(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Tooltip",{Name:"Tooltip",build:function(a){new RS.Controls.Tooltip(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Popover",{Name:"Popover",build:function(a){new RS.Controls.Popover(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Dropdown",{Name:"Dropdown",build:function(a){new RS.Controls.Dropdown(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("ButtonDropdown",{Name:"ButtonDropdown",build:function(a){new RS.Controls.ButtonDropdown(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("SplitButton",{Name:"SplitButton",build:function(a){new RS.Controls.SplitButton(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("List",{Name:"List",build:function(a){new RS.Controls.List(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Tab",{Name:"Tab",build:function(a){new RS.Controls.Tab(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Breadcrumb",{Name:"Breadcrumb",build:function(a){new RS.Controls.Breadcrumb(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Panel",{Name:"Panel",build:function(a){new RS.Controls.Panel(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("ProgressBar",{Name:"ProgressBar",build:function(a){new RS.Controls.ProgressBar(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Pager",{Name:"Pager",build:function(a){new RS.Controls.Pager(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Menu",{Name:"Menu",build:function(a){new RS.Controls.Menu(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Autocomplete",{Name:"Autocomplete",build:function(a){new RS.Controls.Autocomplete(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Combobox",{Name:"Combobox",build:function(a){new RS.Controls.Combobox(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("TreeView",{Name:"TreeView",build:function(a){new RS.Controls.TreeView(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("Grid",{Name:"Grid",build:function(a){new RS.Controls.Grid(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("DateTimePicker",{Name:"DateTimePicker",build:function(a){new RS.Controls.DateTimePicker(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("DataGrid",{Name:"DataGrid",build:function(a){new RS.Controls.DataGrid(null,a)}}),RS.Controls.ControlsGenerator.registerBuilder("DataDropdown",{Name:"DataDropdown",build:function(a){new RS.Controls.DataDropdown(null,a)}});